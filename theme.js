(()=>{"use strict";var n={12:function(n,t,e){var c=this&&this.__awaiter||function(n,t,e,c){return new(e||(e=Promise))((function(o,i){function u(n){try{l(c.next(n))}catch(n){i(n)}}function s(n){try{l(c.throw(n))}catch(n){i(n)}}function l(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}l((c=c.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.t=void 0,t.o=d,t.i=function(n){return c(this,void 0,void 0,(function*(){var t,e,u;if("mouseup"!==n.type)return;a||(a=yield(0,s.u)());const d=n.target,f=d.closest(".ariaLabel");if(!f)return;const m=f.dataset.type,_=d.closest(".protyle-title__icon")||"doc"===f.dataset.type?"doc":void 0,b=l.includes(m)?m:_;if(!b)return;const v="doc"===b?null!==(t=f.parentElement.dataset.nodeId)&&void 0!==t?t:null===(u=null===(e=f.closest(".protyle"))||void 0===e?void 0:e.querySelector(".protyle-title"))||void 0===u?void 0:u.dataset.nodeId:f.dataset.nodeId;r=yield(0,i.l)("#commonMenu:not(.fn__none)"),function(n,t){c(this,void 0,void 0,(function*(){const e="doc"===n;!function(n){c(this,void 0,void 0,(function*(){var t;if(!r||document.getElementById("afwdMenuItem-clear"))return;const e=r.lastChild,c=document.createElement("button");c.className="b3-menu__item";const o=document.createElement("button");o.className="b3-menu__separator";const i=`\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-on">\n            <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">\n            <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m9 12l2 2l4-4"/></g>\n            </svg>\n            <span class="b3-menu__label">${a["afwdMenuItem-on"]}</span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-off">\n            <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">\n            <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m15 9l-6 6m0-6l6 6"/></g>\n            </svg>\n            <span class="b3-menu__label">${a["afwdMenuItem-off"]}</span>\n        </button>\n    `,u=`\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-all">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <svg class="b3-menu__icon" style=""></svg>\n                    <span>${a["afwdMenuItem-all"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-db">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <svg class="b3-menu__icon" style=""><use xlink:href="#iconDatabase"></use></svg>\n                    <span>${a["afwdMenuItem-db"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-t">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <svg class="b3-menu__icon" style=""><use xlink:href="#iconTable"></use></svg>\n                    <span>${a["afwdMenuItem-t"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-p">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <svg class="b3-menu__icon"><use xlink:href="#iconImage"></use></svg>\n                    <span>${a["afwdMenuItem-p"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-iframe">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <svg class="b3-menu__icon"><use xlink:href="#iconHTML5"></use></svg>\n                    <span>${a["afwdMenuItem-iframe"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-sb">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <svg class="b3-menu__icon"><use xlink:href="#iconSuper"></use></svg>\n                    <span>${a["afwdMenuItem-sb"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n    `,s=`\n        <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 18 18">\n            <path fill="currentColor" d="m15.503 15.003l-.735.71a.75.75 0 1 0 1.042 1.078l1.886-1.82a1 1 0 0 0 0-1.44l-1.886-1.82a.75.75 0 0 0-1.042 1.079l.739.713H12.75a.75.75 0 0 0 0 1.5zM15 3a2 2 0 0 1 2 2v4.25a.75.75 0 0 1-1.5 0V5a.5.5 0 0 0-.5-.5H5a.5.5 0 0 0-.5.5v4.25a.75.75 0 0 1-1.5 0V5a2 2 0 0 1 2-2zM5.234 15.712l-.735-.71h2.752a.75.75 0 1 0 0-1.5H4.495l.739-.713a.75.75 0 0 0-1.042-1.078l-1.886 1.82a1 1 0 0 0 0 1.44l1.886 1.82a.75.75 0 0 0 1.042-1.079"/>\n        </svg>\n        <span class="b3-menu__label">${a.afwdDocMenuLabel}</span>\n        <svg class="b3-menu__icon b3-menu__icon--small">\n            <use xlink:href="#iconRight"></use>\n        </svg>\n        <div class="b3-menu__submenu">\n            <div class="b3-menu__items">\n                ${"doc"===n?u:i}\n                <button class="b3-menu__separator"></button>\n                <button class="b3-menu__item" id="afwdMenuItem-clear">\n                    <svg class="b3-menu__icon " style=""><use xlink:href="#iconTrashcan"></use></svg>\n                    <span class="b3-menu__label">${a["afwdMenuItem-clear"]}\n                    </span>\n                </button>\n            </div>\n        </div>\n    `;c.innerHTML=s,e.insertBefore(c,null===(t=e.lastChild)||void 0===t?void 0:t.previousSibling),e.insertBefore(o,c)}))}(n);let i=yield(0,o.m)(t).then((n=>n["custom-afwd"]));if(i||(i=""),i=i.split(" "),i.length>0&&e){if(i.forEach((n=>{const t=document.getElementById(`afwdMenuItem-${n}`);t&&(t.querySelector("input").checked=!0)})),i.includes("all")){const n=null==r?void 0:r.querySelectorAll("button[id^=afwdMenuItem]:not(#afwdMenuItem-all, #afwdMenuItem-clear)");null==n||n.forEach((n=>{n.classList.add("b3-menu__item--disabled"),n.querySelector("input").disabled=!0}))}}else if(i.length>0){const n=document.getElementById(`afwdMenuItem-${i[0]}`);n&&n.classList.add("b3-menu__item--selected")}!function(n,t,e){const c=null==r?void 0:r.querySelectorAll("button[id^=afwdMenuItem]:not(#afwdMenuItem-clear)");let i=[];if(!c)return;const u=[...c].filter((n=>"afwdMenuItem-all"!==n.id));n?null==c||c.forEach((n=>{n.onclick=c=>{if(n.classList.contains("b3-menu__item--disabled"))return;const s=n.querySelector("input"),l=n.id.split("-")[1];let r=s.checked;c.target===s?r=!r:s.checked=!r,r?"all"===l?(u.forEach((n=>{n.classList.remove("b3-menu__item--disabled"),n.querySelector("input").disabled=!1})),e=i.length>0?i:[]):e=e.filter((n=>n!==l)):"all"===l?(e.includes("all")||(i=e),e=["all"],u.forEach((n=>{n.classList.add("b3-menu__item--disabled"),n.querySelector("input").disabled=!0}))):e.push(l),(0,o._)(t,{"custom-afwd":e.join(" ")||""})}})):null==c||c.forEach(((n,c,i)=>{n.onclick=()=>{const u=n.id.split("-")[1];n.classList.contains("b3-menu__item--selected")?(e=[],n.classList.remove("b3-menu__item--selected")):(e=[u],n.classList.add("b3-menu__item--selected"),i[1-c].classList.remove("b3-menu__item--selected")),(0,o._)(t,{"custom-afwd":(null==e?void 0:e.join(" "))||""})}}));const s=document.getElementById("afwdMenuItem-clear");s&&(s.onclick=()=>{e=[],i=[],(0,o._)(t,{"custom-afwd":""}),c.forEach((t=>{if(t.classList.remove("b3-menu__item--disabled"),t.classList.remove("b3-menu__item--selected"),n){const n=t.querySelector("input");n.disabled=!1,n.checked=!1}}))})}(e,t,i)}))}(b,v)}))},t.v=function(){null===u.h||void 0===u.h||u.h.forEach((n=>{(n.querySelector(".file-tree")?[]:n.querySelectorAll(".protyle-wysiwyg")).forEach((n=>{n.style.removeProperty("--protyle-spacing"),n.dataset.p=void 0}))}))};const o=e(613),i=e(629),u=e(937),s=e(787);t.t=(0,i.M)(d,200);const l=["NodeParagraph","NodeTable","NodeAttributeView","NodeSuperBlock","NodeVideo","NodeWidget","NodeIFrame"];let r,a=s.k;function d(){null===u.h||void 0===u.h||u.h.forEach((n=>{let t=n.querySelector(".file-tree")?[]:n.querySelectorAll(".protyle-wysiwyg");setTimeout((()=>{t.forEach((n=>{let t;t=n.style.paddingLeft,t!==n.dataset.p&&(n.style.setProperty("--protyle-spacing",t),n.dataset.p=t)}))}),300)}))}},787:function(n,t,e){var c=this&&this.__awaiter||function(n,t,e,c){return new(e||(e=Promise))((function(o,i){function u(n){try{l(c.next(n))}catch(n){i(n)}}function s(n){try{l(c.throw(n))}catch(n){i(n)}}function l(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}l((c=c.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.followSysAccentColor=t.k=void 0,t.S=function(){return c(this,void 0,void 0,(function*(){r=0===window.siyuan.config.appearance.mode?"light":"dark",function(){return c(this,void 0,void 0,(function*(){yield(0,o.getFile)("/data/snippets/Asri.config.json").then((n=>n&&200===n.status?n.json():null)).then((n=>{var e,c,o;if(!n)return void(t.followSysAccentColor=a[r].followSysAccentColor);let i;n.light||(i=n,Object.keys(a).forEach((t=>{n[t]=i})));const u=["light","dark"];for(const t of u)a[t].followSysAccentColor=!!n[t].followSysAccentColor,a[t].chroma=null!==(e=n[t].chroma)&&void 0!==e?e:"1",a[t].userCustomColor=null!==(c=n[t].userCustomColor)&&void 0!==c?c:"#3478f6",a[t].presetPalette=null!==(o=n[t].presetPalette)&&void 0!==o?o:"";t.followSysAccentColor=!!n[r].followSysAccentColor}))}))}().then((()=>{s.O.P&&(s.O.I||s.O.A||s.O.j?(document.documentElement.style.setProperty("--asri-user-custom-accent",a[r].userCustomColor),A(a[r].userCustomColor)):t.followSysAccentColor?document.documentElement.style.removeProperty("--asri-user-custom-accent"):(document.documentElement.style.setProperty("--asri-user-custom-accent",a[r].userCustomColor),A(a[r].userCustomColor)),document.documentElement.style.setProperty("--asri-c-factor",a[r].chroma),p="0"===a[r].chroma,O(a[r].chroma),P())}))}))},t.T=function(){document.documentElement.style.removeProperty("--asri-user-custom-accent"),document.documentElement.style.removeProperty("--asri-sys-accent-grayscale"),document.documentElement.style.removeProperty("--asri-c-factor"),document.documentElement.style.removeProperty("--asri-sys-accent"),document.documentElement.style.removeProperty("--asri-sys-accent-accessible"),document.documentElement.style.removeProperty("--asri-c-0"),document.documentElement.style.removeProperty("--asri-on-primary-reverse"),document.querySelectorAll(".asri-config").forEach((n=>n.remove()))},t.u=y,t.C=function(n){return c(this,void 0,void 0,(function*(){var e,c;if("mouseup"!==n.type)return;Object.keys(t.k).length||(t.k=yield y());if(!n.target.closest(".toolbar__item"))return;if(document.querySelector(".asri-config"))return;let o=yield(0,u.l)('#commonMenu[data-name="barmode"] .b3-menu__items',document,2,0);if(!o)return;const i=`\n        <button class="b3-menu__separator asri-config"></button>\n        <button class="b3-menu__item asri-config" id="pickColor">\n            <svg class="b3-menu__icon"></svg>\n            <input id="asriColorPicker" type="color" value="${a[r].userCustomColor}">\n            <label for="asriColorPicker" class="be-menu__label">${t.k.pickColor}</label>\n        </button>\n        <button class="b3-menu__item asri-config" id="followSysAccent">\n            <svg class="b3-menu__icon"></svg>\n            <label for="" class="be-menu__label">${t.k.followSysAccent}</label>\n        </button>\n        <button class="b3-menu__item asri-config" data-type="nobg" id="asriChroma">\n            <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">\n                <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 11l-8-8l-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0zM5 2l5 5m-8 6h15m5 7a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4c.3 1.6 2 2.4 2 4" />\n            </svg>\n            <div aria-label="${t.k.asriChroma+(null!==(c=null!==(e=null==b?void 0:b.value)&&void 0!==e?e:a[r].chroma)&&void 0!==c?c:"1")}" class="b3-tooltips b3-tooltips__n">\n                <input style="box-sizing: border-box" type="range" id="asriChromaSlider" class="b3-slider fn__block" min="0" max="5" step="0.1" value="1">\n            </div>\n        </button>\n        <button class="b3-menu__separator asri-config"></button>\n        <button class="b3-menu__item asri-config" id="prst-light-everbliss">\n            <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128"><path fill="#ed6c30" d="M65.49 56.02c.13.32.45 1.18.75 1.36c.36.23 1.6-.35 1.96-.54a6.1 6.1 0 0 0 2.66-2.66c1.15-2.27-.27-5.1-3-4.79c-2.99.34-3.23 4.47-2.37 6.63m-7.59 9.29c.27-.23 1-.79 1.08-1.13c.11-.42-.82-1.42-1.1-1.71c-.9-.91-2.07-1.54-3.33-1.74c-2.51-.42-4.79 1.79-3.67 4.31c1.22 2.74 5.23 1.72 7.02.27m11.66 4.76c-.34-.09-1.23-.33-1.54-.19c-.4.17-.64 1.51-.71 1.9c-.18 1.27.03 2.58.63 3.71c1.18 2.25 4.31 2.74 5.64.33c1.46-2.62-1.77-5.21-4.02-5.75M59.01 52.69c.42.39.85.84 1.32 1.19c.27.2.87.36 1.14.09c.41-.41.54-1.5.66-2.03c.57-2.43.88-4.96.46-7.44l-.02-.08c-.64-3.88-6.03-4.85-7.63-1.05l-.11.3c-.75 2.3.13 4.71 1.67 6.44c.8.9 1.63 1.75 2.51 2.58m-9.58 5.14c1.18.2 2.37.34 3.56.44c.58.05 1.19.13 1.78.11c.32-.01.9-.27.95-.64c.06-.58-.52-1.51-.76-2c-1.07-2.26-2.41-4.43-4.28-6.1l-.06-.06c-2.93-2.62-7.74-.01-6.62 3.96l.11.3c.83 2.26 3.02 3.59 5.32 3.99m-6.78 13.09c-3.71 1.3-3.73 6.78.29 7.7l.32.05c2.39.35 4.61-.94 6.06-2.76q1.11-1.41 2.1-2.91c.32-.49.68-.98.94-1.5c.15-.3.2-.92-.11-1.14c-.48-.34-1.57-.27-2.12-.3c-2.49-.13-5.04 0-7.4.83zM66.7 89.74c1.51-1.89 1.52-4.45.68-6.63a40 40 0 0 0-1.45-3.28c-.26-.52-.51-1.08-.82-1.58c-.18-.27-.69-.63-1.04-.48c-.53.24-1.03 1.21-1.33 1.68c-1.38 2.08-2.55 4.35-3.03 6.8l-.02.09c-.74 3.86 3.96 6.64 6.79 3.64zm14.61-13.11l.07.05c3.44 1.9 7.55-1.7 5.57-5.33l-.17-.27c-1.33-2.02-3.76-2.83-6.08-2.71c-1.2.06-2.39.19-3.57.37c-.57.08-1.19.14-1.75.29c-.32.08-.82.46-.78.83c.06.58.84 1.35 1.18 1.79c1.55 1.95 3.34 3.77 5.53 4.98m-6.36-18.25c.56.18 1.58-.22 2.11-.36c2.42-.62 4.8-1.53 6.8-3.04l.07-.05c3.13-2.38 1.49-7.6-2.62-7.25l-.32.05c-2.38.39-4.11 2.29-4.94 4.47a41 41 0 0 0-1.11 3.41c-.15.56-.35 1.14-.44 1.72c-.05.33.09.93.45 1.05"/><path fill="#f79329" d="m19.62 87.45l.31.1c2.51.67 5.45-.74 7.56-1.96c1.95-1.13 3.87-2.35 5.62-3.79c.68-.57 1.4-1.1 1.96-1.79c.5-.63.86-1.85-.18-2.19c-1.46-.46-3.15-.22-4.65-.15c-3.36.16-7 .29-10.1 1.75c-1.08.51-2 1.26-2.65 2.39c-1.2 2.07-.18 4.82 2.13 5.64m52.1 26.75l.18-.27c1.32-2.23.74-5.45.12-7.81c-.58-2.18-1.24-4.36-2.17-6.42c-.37-.8-.68-1.64-1.2-2.36c-.48-.65-1.56-1.33-2.16-.42c-.84 1.28-1.05 2.98-1.38 4.44c-.74 3.28-1.58 6.82-1.01 10.19c.21 1.17.69 2.27 1.6 3.19c1.7 1.73 4.62 1.48 6.02-.54m36.85-27.7c2.27-.83 3.25-3.59 2-5.69l-.17-.28c-1.49-2.13-4.65-2.94-7.06-3.35c-2.22-.38-4.48-.68-6.74-.69c-.88 0-1.78-.06-2.65.11c-.79.16-1.85.87-1.27 1.79c.81 1.3 2.27 2.19 3.46 3.1c2.68 2.04 5.55 4.27 8.86 5.15c1.15.29 2.34.32 3.57-.14M91.41 34.24c-1.28 1.86-2.49 3.79-3.45 5.83c-.37.8-.8 1.59-1.01 2.46c-.18.79.01 2.04 1.1 1.91c1.52-.2 2.94-1.15 4.26-1.85c2.97-1.58 6.2-3.26 8.38-5.9c.75-.92 1.27-1.99 1.37-3.3c.2-2.41-1.9-4.46-4.34-4.2l-.32.04c-2.55.46-4.61 3-5.99 5.01m-67.1 17.57c2.21.46 4.45.85 6.71.94c.88.03 1.78.13 2.65-.01c.8-.13 1.89-.79 1.34-1.75c-.76-1.32-2.19-2.27-3.34-3.23c-2.61-2.13-5.39-4.48-8.67-5.46c-1.14-.35-2.32-.42-3.56-.02c-2.3.74-3.39 3.46-2.22 5.62l.17.29c1.4 2.18 4.53 3.12 6.92 3.62M40.9 20.98l-.07.32c-.43 2.56 1.26 5.35 2.68 7.34c1.32 1.82 2.72 3.62 4.33 5.22c.62.62 1.23 1.29 1.97 1.78c.67.44 1.93.68 2.16-.39c.33-1.5-.09-3.15-.29-4.63c-.49-3.33-.97-6.94-2.73-9.88c-.61-1.03-1.44-1.87-2.62-2.41c-2.21-1.02-4.85.27-5.43 2.65m19.39-6.69l-.17.27c-1.47 2.45-.72 5.6-.23 8.22c.81 4.39 1.85 8.71 3.33 12.92c.23.65.49 1.82 1.25 2.06c1.16.35 1.35-1.32 1.56-2.02C67 32.5 67.2 29 67.68 25.66c.42-2.88.71-5.81.22-8.71c-.2-1.17-.68-2.27-1.59-3.19c-1.69-1.73-4.61-1.48-6.02.53M25.79 31c.65 2.79 3.38 4.52 5.56 6.07c3.63 2.59 7.38 4.96 11.38 6.95c.61.3 1.62.97 2.33.6c1.08-.54.05-1.88-.28-2.54c-1.55-2.99-3.85-5.64-5.83-8.37c-1.71-2.36-3.54-4.67-5.91-6.4c-.96-.71-2.07-1.16-3.37-1.19c-2.41-.06-4.34 2.15-3.95 4.58zm19.35 55.83c-.52-1.09-1.88-.09-2.54.24c-3.03 1.49-5.73 3.74-8.49 5.66c-2.39 1.66-4.74 3.44-6.52 5.77c-.72.95-1.2 2.04-1.26 3.35c-.11 2.41 2.06 4.38 4.49 4.04l.32-.06c2.79-.6 4.58-3.29 6.17-5.44c2.67-3.58 5.11-7.28 7.18-11.24c.32-.61 1-1.61.65-2.32m9.79 6.16c-2.17 2.58-3.75 5.72-5.51 8.59c-1.53 2.48-2.96 5.05-3.66 7.9c-.29 1.16-.29 2.35.19 3.57c.86 2.26 3.64 3.18 5.73 1.9l.27-.18c2.31-1.67 2.87-4.86 3.47-7.47c1-4.35 1.76-8.71 2.08-13.17c.05-.69.27-1.87-.34-2.38c-.92-.77-1.76.68-2.23 1.24M13.04 59.44c-1.86 1.53-1.87 4.46 0 6.03l.26.2c2.32 1.67 5.51 1.19 8.18.94c4.44-.42 8.82-1.09 13.15-2.19c.67-.18 1.86-.34 2.16-1.07c.46-1.12-1.2-1.46-1.88-1.73c-3.13-1.25-6.62-1.75-9.89-2.51c-2.83-.67-5.73-1.21-8.65-.98c-1.18.09-2.32.47-3.33 1.31m62.42-19.1c.78.14 1.54-.8 2.03-1.27c3.2-3.12 6.06-6.51 8.74-10.08c1.61-2.14 3.68-4.61 3.46-7.47l-.03-.32c-.36-2.43-2.87-3.95-5.15-3.15c-1.23.43-2.15 1.19-2.85 2.15c-1.73 2.38-2.77 5.12-3.68 7.89c-1.06 3.19-2.45 6.42-3.02 9.75c-.12.72-.69 2.3.5 2.5m32.58 4.21c-2.88.53-5.54 1.81-8.11 3.19c-2.96 1.59-6.19 2.97-8.9 4.98c-.58.44-2.09 1.19-1.37 2.16c.49.63 1.68.48 2.36.48c4.47-.05 8.88-.54 13.28-1.28c2.63-.45 5.84-.82 7.65-3.03l.2-.26c1.41-2.01.64-4.84-1.56-5.83c-1.19-.55-2.38-.63-3.55-.41m-18.9 66.57c.32-1.27.18-2.46-.24-3.57c-1.04-2.74-2.77-5.13-4.58-7.41c-2.09-2.63-4.03-5.57-6.49-7.87c-.54-.5-1.55-1.85-2.37-.96c-.54.58-.18 1.73-.05 2.41c.84 4.38 2.11 8.63 3.63 12.83c.9 2.51 1.84 5.61 4.33 6.99l.29.14c2.24 1.03 4.89-.23 5.48-2.56m13.7-13.21c-1.99-2.15-4.49-3.71-7.04-5.14c-2.93-1.65-5.83-3.62-8.98-4.82c-.69-.26-2.13-1.13-2.56.01c-.27.74.49 1.66.87 2.24c2.44 3.75 5.22 7.2 8.21 10.52c1.79 1.98 3.83 4.49 6.66 4.83l.32.02c2.45.11 4.43-2.06 4.09-4.45c-.17-1.29-.75-2.34-1.57-3.21m8.94-34.74c-2.88-.54-5.82-.3-8.7.06c-3.34.42-6.85.55-10.1 1.46c-.71.2-2.39.37-2.05 1.53c.22.76 1.38 1.05 2.03 1.29c4.18 1.56 8.47 2.68 12.85 3.57c2.61.54 5.75 1.34 8.23-.07l.27-.17c2.04-1.37 2.34-4.29.65-6.01c-.92-.94-2.01-1.43-3.18-1.66"/><path fill="#ed6c30" d="M68.46 60.57c-1.46 0-2.64 1.19-2.64 2.64c0 1.46 1.18 2.64 2.64 2.64s2.64-1.18 2.64-2.64c0-1.45-1.18-2.64-2.64-2.64"/><circle cx="60.02" cy="70.85" r="2.64" fill="#ed6c30"/><path fill="#fcc21b" d="M90.88 117.43c-2.52 0-4.55 2.04-4.55 4.55c0 2.52 2.04 4.55 4.55 4.55a4.55 4.55 0 1 0 0-9.1"/><circle cx="111.12" cy="109.49" r="4.55" fill="#fcc21b"/><path fill="#fcc21b" d="M120.61 82.3a4.55 4.55 0 1 0 0 9.1c2.51 0 4.55-2.04 4.55-4.55c0-2.52-2.04-4.55-4.55-4.55"/><circle cx="122.14" cy="44.46" r="4.55" fill="#fcc21b"/><path fill="#fcc21b" d="M93.09 13.9a4.54 4.54 0 0 0 4.55-4.55c0-2.51-2.04-4.55-4.55-4.55c-2.52 0-4.55 2.04-4.55 4.55c0 2.52 2.04 4.55 4.55 4.55m-54.37.02c2.52 0 4.55-2.04 4.55-4.55c0-2.52-2.04-4.55-4.55-4.55a4.54 4.54 0 0 0-4.55 4.55c0 2.51 2.03 4.55 4.55 4.55"/><ellipse cx="8.74" cy="41.02" fill="#fcc21b" rx="4.55" ry="4.56"/><path fill="#fcc21b" d="M8.88 85.2a4.55 4.55 0 0 0-4.55 4.56c0 2.51 2.04 4.55 4.55 4.55s4.55-2.04 4.55-4.55c0-2.53-2.03-4.56-4.55-4.56"/><circle cx="45.54" cy="123.09" r="4.56" fill="#fcc21b"/><path fill="#fcc21b" d="M123.57 64.42c-2.18 0-3.94 1.76-3.94 3.93c0 2.18 1.76 3.95 3.94 3.95c2.17 0 3.93-1.77 3.93-3.95c.01-2.17-1.76-3.93-3.93-3.93"/><ellipse cx="108.42" cy="25.2" fill="#fcc21b" rx="3.93" ry="3.94"/><circle cx="62.94" cy="4.29" r="3.94" fill="#fcc21b"/><circle cx="20.28" cy="21.62" r="3.94" fill="#fcc21b"/><circle cx="4.43" cy="62.85" r="3.94" fill="#fcc21b"/><circle cx="21.82" cy="110.83" r="3.94" fill="#fcc21b"/><circle cx="69.15" cy="123.68" r="3.94" fill="#fcc21b"/></svg>\n            <span class="b3-menu__label">Everbliss</span>\n        </button>\n`,l=document.createRange().createContextualFragment(i);o.appendChild(l),m=document.getElementById("followSysAccent"),_=document.getElementById("pickColor"),b=document.getElementById("asriChromaSlider"),v=_.querySelector("input"),m&&_&&b&&v&&(m.classList.toggle("b3-menu__item--selected",t.followSysAccentColor),_.classList.toggle("b3-menu__item--selected",!t.followSysAccentColor),b.value=a[r].chroma||"1",b.parentElement.ariaLabel=t.k.asriChroma+a[r].chroma,function(){if(!(m&&_&&b&&v))return;s.O.I||s.O.A||s.O.j?m.classList.add("fn__none"):m.addEventListener("mouseup",g);_.addEventListener("mouseup",x),v.addEventListener("input",M),v.addEventListener("change",k),b.addEventListener("input",S)}())}))},t.L=P;const o=e(613),i=e(571),u=e(629),s=e(49),l=e(288);let r,a={light:{followSysAccentColor:!1,chroma:"1",userCustomColor:"#3478f6",presetPalette:""},dark:{followSysAccentColor:!1,chroma:"1",userCustomColor:"#3478f6",presetPalette:""}};const d=(0,u.M)(w,200);let f,m,_,b,v,h=!1,p=!1;function y(){return c(this,void 0,void 0,(function*(){let n;try{return n=["zh_CN","zh_CHT","en_US"].includes(s.O.lang)?yield fetch(`/appearance/themes/Asri/i18n/${s.O.lang}.json`):yield fetch("/appearance/themes/Asri/i18n/en_US.json"),t.k=yield n.json(),t.k}catch(n){throw n}}))}function w(){return c(this,void 0,void 0,(function*(){yield(0,o.N)("/data/snippets/Asri.config.json",JSON.stringify(a,void 0,4))}))}function g(){(0,l.R)(600,(()=>{t.followSysAccentColor?(t.followSysAccentColor=!1,m.classList.remove("b3-menu__item--selected"),_.classList.add("b3-menu__item--selected"),document.documentElement.style.setProperty("--asri-user-custom-accent",a[r].userCustomColor||f||"#3478f6"),O(a[r].chroma),A(a[r].userCustomColor||f||"#3478f6"),a[r].followSysAccentColor=!1):(t.followSysAccentColor=!0,m.classList.add("b3-menu__item--selected"),_.classList.remove("b3-menu__item--selected"),document.documentElement.style.removeProperty("--asri-user-custom-accent"),a[r].followSysAccentColor=!0,P()),w()}))}function x(){(0,l.R)(600,(()=>{t.followSysAccentColor&&(t.followSysAccentColor=!1,m.classList.remove("b3-menu__item--selected"),_.classList.add("b3-menu__item--selected"),document.documentElement.style.setProperty("--asri-user-custom-accent",a[r].userCustomColor),O(a[r].chroma),A(a[r].userCustomColor),a[r].userCustomColor=a[r].userCustomColor,a[r].followSysAccentColor=!1,w())}))}function M(){const n=v.value;document.documentElement.style.setProperty("--asri-user-custom-accent",n),A(n)}function k(){m.classList.remove("b3-menu__item--selected"),_.classList.add("b3-menu__item--selected"),A(v.value),a[r].userCustomColor=v.value,t.followSysAccentColor=!1,a[r].followSysAccentColor=!1,w()}function S(){const n=this.value;document.documentElement.style.setProperty("--asri-c-factor",n),this.parentElement.ariaLabel=t.k.asriChroma+n,a[r].chroma=n,p="0"===n,O(n),d()}function P(){if(!(s.O.I||s.O.A||s.O.j)){const n="#"+i.remote.systemPreferences.getAccentColor().slice(0,6),e=(0,u.B)(n);if(!e)return;f!==n&&(document.documentElement.style.setProperty("--asri-sys-accent",n),e.s>.28?document.documentElement.style.setProperty("--asri-sys-accent-accessible",n):document.documentElement.style.removeProperty("--asri-sys-accent-accessible"),h=0===e.s,f=n),t.followSysAccentColor&&(O(e.s),A(n))}}function O(n){return"0"===String(n)||t.followSysAccentColor&&h||p?(document.documentElement.style.setProperty("--asri-c-0","0"),!0):(document.documentElement.style.removeProperty("--asri-c-0"),!1)}t.followSysAccentColor=!1;const I="light"===s.O.$?.81:.79;function A(n){const t=(0,u.D)(n);t&&(t>I?document.documentElement.style.setProperty("--asri-on-primary-reverse","light"===s.O.$?".4":".3"):document.documentElement.style.removeProperty("--asri-on-primary-reverse"))}},344:(n,t)=>{function e(){document.body.classList.toggle("has-exportimg",!!document.querySelector('[data-key="dialog-exportimage"]'))}Object.defineProperty(t,"__esModule",{value:!0}),t.F=function(n,t){e()},t.V=e},818:function(n,t,e){var c=this&&this.__awaiter||function(n,t,e,c){return new(e||(e=Promise))((function(o,i){function u(n){try{l(c.next(n))}catch(n){i(n)}}function s(n){try{l(c.throw(n))}catch(n){i(n)}}function l(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}l((c=c.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.H=function(){return c(this,void 0,void 0,(function*(){const n=i.U.J?i.U.J:yield(0,o.l)("#dockLeft");i.U.W||(yield(0,o.l)(".layout__dockl"));const t=i.U.q;for(let e of[n,t]){let t=(0,u.K)(e===n?"L":"R"),c=(0,u.Y)(e===n?"L":"R");t&&c?null==e||e.classList.add("dock-layout-expanded"):null==e||e.classList.remove("dock-layout-expanded")}}))},t.G=function(){return c(this,void 0,void 0,(function*(){var n,t,e;if(i.O.A)return;const c=yield(0,u.X)(),o=!(0,u.K)("B")&&(0,u.Y)("B");null===(n=i.U.toolbar)||void 0===n||n.nextElementSibling.classList.toggle("has-dockb",c),null===(t=i.U.toolbar)||void 0===t||t.nextElementSibling.classList.toggle("has-layout-dockb-float",o),null===(e=i.U.Z)||void 0===e||e.classList.toggle("has-layout-dockb-float",o)}))},t.nn=function(){var n,t;null===(n=i.U.toolbar)||void 0===n||n.nextElementSibling.classList.remove("has-dockb"),null===(t=i.U.toolbar)||void 0===t||t.nextElementSibling.classList.remove("has-layout-dockb-float")},t.tn=function(){var n;null===(n=document.querySelector(".dock-layout-expanded"))||void 0===n||n.classList.remove("dock-layout-expanded")};const o=e(629),i=e(49),u=e(937)},261:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.en=function(){o.forEach((({cn:n,className:t})=>{n&&document.body.classList.add(t)}))},t.un=function(){o.forEach((({className:n})=>{document.body.classList.remove(n)}))};const c=e(49),o=[{cn:c.O.sn,className:"body-asri--mac"},{cn:c.O.j,className:"body-asri--linux"},{cn:c.O.A,className:"body-asri--mobile"},{cn:c.O.I,className:"body-asri--browser"},{cn:c.O.ln,className:"body-asri--android"},{cn:c.O.rn,className:"body-asri--iosApp"},{cn:c.O.an,className:"body-asri--readOnly"},{cn:c.O.dn,className:"body-asri--safari"}]},54:(n,t)=>{function e(){document.querySelectorAll(".asri-selected-block").forEach((n=>n.classList.remove("asri-selected-block")))}Object.defineProperty(t,"__esModule",{value:!0}),t.fn=function(n){const t=new Promise((n=>{const t=()=>{document.removeEventListener("mouseup",t,!0),n()};document.addEventListener("mouseup",t,!0)})),c=new Promise((n=>{setTimeout(n,300)})),o=new Promise((n=>{const t=()=>{document.removeEventListener("keyup",t,!0),n()};document.addEventListener("keyup",t,!0)}));Promise.race([t,o,c]).then((()=>{const n=window.getSelection(),t=n&&n.rangeCount>0?n.getRangeAt(0):null;if(!t)return;const c=t.commonAncestorContainer.parentElement,o=c?c.closest("[data-node-id]"):null;if(!o)return;const i=o.getAttribute("data-type");e(),i&&!["NodeAttributeView","NodeCodeBlock","NodeList","NodeHTMLBlock"].includes(i)&&o.classList.add("asri-selected-block")}))},t.mn=e},2:function(n,t,e){var c=this&&this.__awaiter||function(n,t,e,c){return new(e||(e=Promise))((function(o,i){function u(n){try{l(c.next(n))}catch(n){i(n)}}function s(n){try{l(c.throw(n))}catch(n){i(n)}}function l(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}l((c=c.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t._n=function(){return c(this,void 0,void 0,(function*(){(0,m.en)(),(0,v.bn)(),(0,w.vn)(),(0,p.hn)(),(0,a.S)(),yield(0,a.u)(),l.O.A||(yield(0,i.pn)(),yield(0,y.yn)("initials"),(0,y.wn)()),N(),(0,f.G)(),(0,p.gn)(),g.start(document,"mouseup"),x.start(document,"dragend"),M.start(document,"keyup",!0),k.start(window,"focus"),k.start(window,"blur"),S.start(document,"selectionchange"),O.observe(document.body,s.xn),P.observe(document.body,{childList:!0}),j.start(b.Mn,"change"),l.U.kn||(yield(0,u.l)(".layout__center")),l.O.A||(I.observe(l.U.kn),A.observe(document.body))}))},t.Sn=function(){return c(this,arguments,void 0,(function*(n=!0){n&&(l.O.A||(yield(0,y.Pn)()),(0,f.tn)(),(0,h.On)(),(0,r.v)(),(0,f.nn)(),(0,_.mn)(),(0,p.In)(),(0,p.An)(),(0,m.un)(),(0,v.jn)(),(0,w.Tn)(),document.body.classList.remove("body-asri--fullscreen"),(0,a.T)()),g.remove(document,"mouseup"),x.remove(document,"dragend"),M.remove(document,"keyup",!0),k.remove(window,"focus"),k.remove(window,"blur"),S.remove(document,"selectionchange"),O.disconnect(),j.remove(b.Mn,"change"),P.disconnect((()=>{document.body.classList.remove("has-exportimg")})),l.O.A||(I.disconnect(),A.disconnect())}))};const o=e(796),i=e(937),u=e(629),s=e(766),l=e(49),r=e(12),a=e(787),d=e(344),f=e(818),m=e(261),_=e(54),b=e(288),v=e(832),h=e(844),p=e(414),y=e(376),w=e(130),g=new o.Cn(L),x=new o.Cn(L),M=new o.Cn(L),k=new o.Cn((function(n){(0,i.pn)().then((()=>{N(),!l.O.rn&&a.followSysAccentColor&&l.O.P&&(0,a.L)()}))})),S=new o.Cn(_.fn),P=new s.Ln((0,u.M)(d.F)),O=new s.Ln((function(n,t){for(let t of n){if(t.target.classList.contains("body--blur"))return;t.target.classList.contains("b3-list-item--focus")&&(0,h.Nn)()}})),I=new s.Rn((function(n,t){(0,y.Bn)(0,T,i.$n).then(y.zn),(0,r.t)(),(0,p.Dn)()})),A=new s.Rn((function(n,t){for(let t of n){T=!0,R();const{inlineSize:n}=t.contentBoxSize[0];if(t.target instanceof HTMLElement){if(!t.target.dataset.Fn){t.target.dataset.Fn=n+"";continue}const e=n-parseFloat(t.target.dataset.Fn);t.target.dataset.Fn=n+"",C=e}}})),j=new o.Cn((function(n){(0,b.R)(600,(()=>{}),200)}));let T=!1,C=0;function L(n){(0,a.C)(n),(0,r.i)(n),N(n),(0,b.Vn)(n)}function N(n){return c(this,void 0,void 0,(function*(){function t(){setTimeout((()=>c(this,void 0,void 0,(function*(){(0,f.H)(),(0,p.Dn)(),(0,p.hn)(),yield(0,i.pn)(),(0,r.o)(),(0,f.G)(),(0,p.gn)(),!l.O.rn&&a.followSysAccentColor&&l.O.P&&(0,a.L)()}))),0)}n?(n.type.startsWith("mouse")||n.type.startsWith("drag")||n instanceof KeyboardEvent&&("Control"===n.key||"Alt"===n.key||"Shift"===n.key||"Meta"===n.key))&&(t(),setTimeout((()=>{(0,y.Hn)(),(0,y.Bn)(0,!1,i.$n).then(y.zn)}),0)):(t(),(0,y.Bn)().then(y.zn))}))}const R=(0,u.M)((()=>{T=!1,(0,y.En)(),(0,i.Jn)(),i.$n||(0,y.Hn)(),(0,y.Bn)(C,T,i.$n).then(y.zn),C=0}),200)},288:function(n,t){var e=this&&this.__awaiter||function(n,t,e,c){return new(e||(e=Promise))((function(o,i){function u(n){try{l(c.next(n))}catch(n){i(n)}}function s(n){try{l(c.throw(n))}catch(n){i(n)}}function l(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}l((c=c.apply(n,t||[])).next())}))};function c(){return e(this,arguments,void 0,(function*(n=600,t,c=0){if(document.startViewTransition)if(c>0){const o=n=>new Promise((t=>setTimeout(t,n)));document.startViewTransition((()=>e(this,void 0,void 0,(function*(){yield Promise.race([o(c)]),t&&t()})))).ready.then((()=>{document.documentElement.animate({opacity:[0,1]},{duration:n})}))}else{const e=document.startViewTransition(t),c=document.createElement("style");c.textContent=`\n            ::view-transition-old(root),\n            ::view-transition-new(root) {\n                animation-duration: ${n}ms;\n            }\n        `,document.head.appendChild(c),yield e.finished,c.remove()}else t&&t()}))}Object.defineProperty(t,"__esModule",{value:!0}),t.Mn=void 0,t.Vn=function(n){return e(this,void 0,void 0,(function*(){if("mouseup"!==n.type)return;n.target.closest('[data-name="barmode"] .b3-menu__item:not([id])')&&c()}))},t.R=c,t.Mn=window.matchMedia("(prefers-color-scheme: dark)")},832:function(n,t,e){var c=this&&this.__awaiter||function(n,t,e,c){return new(e||(e=Promise))((function(o,i){function u(n){try{l(c.next(n))}catch(n){i(n)}}function s(n){try{l(c.throw(n))}catch(n){i(n)}}function l(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}l((c=c.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.bn=function(){return c(this,void 0,void 0,(function*(){if(i||u)for(let n=0;n<document.styleSheets.length;n++){let t=document.styleSheets[n];try{for(let n=0;n<t.cssRules.length;n++){let e=t.cssRules[n];e.selectorText&&e.selectorText.includes("::-webkit-scrollbar")&&(e.style.width||e.style.height||e.style.backgroundColor)&&(s.push({styleSheet:t,Un:e.cssText}),t.deleteRule(n),n--)}}catch(n){}}}))},t.jn=function(){return c(this,void 0,void 0,(function*(){if(s)for(let n=0;n<s.length;n++){let t=s[n];t.styleSheet.insertRule(t.Un,t.styleSheet.cssRules.length)}}))};const o=e(49),{sn:i,A:u}=o.O,s=[]},844:function(n,t,e){var c=this&&this.__awaiter||function(n,t,e,c){return new(e||(e=Promise))((function(o,i){function u(n){try{l(c.next(n))}catch(n){i(n)}}function s(n){try{l(c.throw(n))}catch(n){i(n)}}function l(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}l((c=c.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Nn=void 0,t.Wn=s,t.On=function(){document.querySelectorAll(".file-tree .has-focus").forEach((n=>n.classList.remove("has-focus")))};const o=e(629),i=e(49),{A:u}=i.O;function s(){return c(this,void 0,void 0,(function*(){if(u)return;i.U.W||(yield(0,o.l)(".layout__dockl"));let n=document.querySelectorAll(".file-tree .b3-list-item--focus");n.length&&(document.querySelectorAll(".file-tree .has-focus").forEach((n=>n.classList.remove("has-focus"))),n.forEach((n=>{n.nextElementSibling&&"UL"===n.nextElementSibling.tagName&&!n.nextElementSibling.classList.contains("fn__none")||n.parentNode instanceof Element&&n.parentNode.classList.add("has-focus")})))}))}t.Nn=(0,o.M)(s)},414:function(n,t,e){var c=this&&this.__awaiter||function(n,t,e,c){return new(e||(e=Promise))((function(o,i){function u(n){try{l(c.next(n))}catch(n){i(n)}}function s(n){try{l(c.throw(n))}catch(n){i(n)}}function l(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}l((c=c.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Dn=void 0,t.qn=s,t.hn=function(){const n=(0,o.Kn)()?0:32;document.body.style.setProperty("--status-height",`${n}px`)},t.An=function(){document.body.style.removeProperty("--status-height"),setTimeout((()=>{var n,t;null===(n=document.getElementById("status"))||void 0===n||n.style.removeProperty("max-width"),null===(t=document.getElementById("status"))||void 0===t||t.style.removeProperty("transform")}),200)},t.gn=function(){var n,t;if(!(0,o.Kn)()){const e=null===(n=i.U.Yn)||void 0===n?void 0:n.querySelectorAll(".layout__center .layout-tab-container"),c=i.U.status;null==e||e.forEach((n=>{let t=n.querySelector(".file-tree");t&&!t.classList.contains("fn__none")&&(0,u.Gn)(n,c)?n.style.paddingBottom="35px":n.style.removeProperty("padding-bottom")}));const o=document.getElementById("searchList"),s=document.getElementById("searchPreview");(o||s)&&((0,u.Gn)(o,c)?o.style.paddingBottom="35px":o.style.removeProperty("padding-bottom"),(0,u.Gn)(s,c)?s.style.paddingBottom="35px":s.style.removeProperty("padding-bottom"));const l=document.getElementById("viewerContainer");l&&((0,u.Gn)(l,c)?l.style.paddingBottom="35px":l.style.removeProperty("padding-bottom")),null===(t=i.U.Yn)||void 0===t||t.querySelectorAll(".card__main").forEach((n=>{n&&((0,u.Gn)(n,c)?n.style.paddingBottom="35px":n.style.removeProperty("padding-bottom"))}))}},t.In=function(){var n,t;null===(n=i.U.Yn)||void 0===n||n.querySelectorAll(".layout__center .layout-tab-container").forEach((n=>{n.style.removeProperty("padding-bottom")})),null===(t=i.U.Yn)||void 0===t||t.querySelectorAll(".card__main").forEach((n=>{n.style.removeProperty("padding-bottom")}));const e=document.getElementById("searchList"),c=document.getElementById("searchPreview"),o=document.getElementById("viewerContainer");for(const n of[e,c,o])n&&n.style.removeProperty("padding-bottom")};const o=e(937),i=e(49),u=e(629);function s(){return c(this,void 0,void 0,(function*(){var n,t;if(!i.O.A&&!i.O.Qn)if(i.U.status||(yield(0,u.l)("#status")),yield(0,o.X)())null===(n=i.U.status)||void 0===n||n.style.removeProperty("max-width"),null===(t=i.U.status)||void 0===t||t.style.removeProperty("transform");else{function e(n,t){i.U.status.style.transform=`translate(${n}px, ${t}px)`}let c=(i.U.Yn||(yield(0,u.l)("#layouts"))).querySelector(".layout__center");if(c&&i.U.Xn&&!i.U.status.classList.contains(".fn__none")){let s=i.U.Xn.clientWidth,l=c.clientWidth,r=0;i.U.Zn||(yield(0,u.l)(".layout__dockb")),r=i.U.Zn&&!i.U.Zn.classList.contains(".fn__none")&&(0,o.K)("B")?-1*i.U.Zn.clientHeight:0,i.U.status.style.maxWidth=l-12+"px";let a=(0,o.nt)("R"),d=!(0,o.K)("R")&&(0,o.Y)("R");a&&d?e(0,r):!a&&d?e(-40,r):a||d?a&&!d&&e(-1*s,r):e(-1*(s+40),r)}}}))}t.Dn=(0,u.M)(s)},376:function(n,t,e){var c=this&&this.__awaiter||function(n,t,e,c){return new(e||(e=Promise))((function(o,i){function u(n){try{l(c.next(n))}catch(n){i(n)}}function s(n){try{l(c.throw(n))}catch(n){i(n)}}function l(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}l((c=c.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.yn=y,t.En=function(){return c(this,void 0,void 0,(function*(){i.O.sn&&((0,u.isFullScreen)()?(document.body.classList.add("body-asri--fullscreen"),b-=p?0:88,p=!0):(document.body.classList.remove("body-asri--fullscreen"),null==l||l.style.setProperty("width","0px"),b=yield y("initials","L"),null==l||l.style.removeProperty("width"),p=!1))}))},t.Bn=function(){return c(this,arguments,void 0,(function*(n=0,t=!1,e=!1){if(i.O.Qn||i.O.A)return{tt:!1,et:0};let u=i.U.kn||(yield(0,o.l)(".layout__center"));return new Promise((o=>c(this,void 0,void 0,(function*(){var c,s,r,a,d,w;t&&(v+=n),b&&v||(yield y("initials")),f=u.getBoundingClientRect(),_=i.U.ct.getBoundingClientRect(),m=i.U.ot.getBoundingClientRect();let g=f.left,x=f.right,M=i.U.it.getBoundingClientRect().left;t||(g>b+8?(null==h||h.style.setProperty("--topbar-left-spacing","0"),i.O.sn&&p||(yield y("initials","L")),null==l||l.classList.remove("asri-expanded")):i.O.sn&&!i.O.I?(h.style.setProperty("--topbar-left-spacing",g-_.right+4+"px"),null==l||l.classList.add("asri-expanded")):(h.style.setProperty("--topbar-left-spacing",g-m.right+4+"px"),null==l||l.classList.add("asri-expanded")),x<v-8&&!e?(h.style.setProperty("--topbar-right-spacing","0"),yield y("initials","R"),null===(c=i.U.q)||void 0===c||c.style.removeProperty("--avoid-topbar"),null===(s=i.U.Xn)||void 0===s||s.style.removeProperty("--avoid-topbar")):i.O.sn||i.O.I?(h.style.setProperty("--topbar-right-spacing",window.innerWidth-x+1+"px"),null===(r=i.U.q)||void 0===r||r.style.setProperty("--avoid-topbar","4px"),null===(a=i.U.Xn)||void 0===a||a.style.setProperty("--avoid-topbar","4px")):(h.style.setProperty("--topbar-right-spacing",M-x+6+"px"),null===(d=i.U.q)||void 0===d||d.style.setProperty("--avoid-topbar","calc(var(--toolbar-height) - 6px)"),null===(w=i.U.Xn)||void 0===w||w.style.setProperty("--avoid-topbar","calc(var(--toolbar-height) - 6px)"))),o({tt:!0,et:x})}))))}))},t.zn=function(){return c(this,arguments,void 0,(function*({tt:n,et:t}={tt:!1,et:0}){var e,l;n&&(a=null===(e=i.U.toolbar)||void 0===e?void 0:e.getBoundingClientRect(),yield y("rect"),f=null===(l=i.U.kn)||void 0===l?void 0:l.getBoundingClientRect(),(s||(s=document.getElementById("AsriPluginsIconsDivider")))&&(t<v-8?(s.style.setProperty("--container-bg","var(--b3-border-color-trans))"),s.style.left=t+"px",s.style.right="0",s.style.removeProperty("height"),s.style.removeProperty("top"),s.style.removeProperty("width")):(s.style.setProperty("--container-bg","var(--b3-border-color-trans)"),s.style.left=d.right-10+"px",s.style.width="2px",s.style.height="21px",s.style.top="13.5px")),null===u.h||void 0===u.h||u.h.forEach((n=>c(this,void 0,void 0,(function*(){let t,e=n.querySelector('.fn__flex-column[data-type="wnd"] > .fn__flex:first-child');if(e.classList.contains("fn__none")&&(e=yield(0,o.l)('.fn__flex-column[data-type="wnd"] > .fn__flex:first-child:not(.fn__none)',n,3)),t=null==e?void 0:e.getBoundingClientRect(),!t)return;let c=t.left<d.left?d.left-t.left-4:0,u=t.right>d.right?t.right-d.right+8:0;(0,o.Gn)(e,i.U.ut)||(0,o.Gn)(e,i.U.toolbar)?(e.style.paddingLeft=c+"px",e.style.paddingRight=u+"px",t.right-u-240<d.left&&t.left<d.left||t.left+c+240>d.right&&t.right>d.right?(e.style.paddingTop="42px",e.style.paddingLeft="0",e.style.paddingRight="0"):e.style.removeProperty("padding-top")):(e.style.removeProperty("padding-left"),e.style.removeProperty("padding-right"),e.style.removeProperty("padding-top"))})))))}))},t.Pn=function(){return c(this,void 0,void 0,(function*(){var n,t;yield(0,u.pn)(),function(){s&&s.remove();l&&(l.remove(),l=void 0);r&&(r.remove(),r=void 0)}(),null===u.h||void 0===u.h||u.h.forEach((n=>{let t=n.firstElementChild;t.style.removeProperty("padding-top"),t.style.removeProperty("padding-left"),t.style.removeProperty("padding-right")})),i.U.kn.dataset.Fn=void 0,document.body.dataset.Fn=void 0,null===(n=i.U.q)||void 0===n||n.style.removeProperty("--avoid-topbar"),null===(t=i.U.Xn)||void 0===t||t.style.removeProperty("--avoid-topbar")}))},t.wn=function(){if(i.O.A)return;s=w("AsriPluginsIconsDivider",void 0,i.U.ut),l=i.O.sn&&!i.O.I?w("AsriTopbarLeftSpacing",void 0,i.U.ct):w("AsriTopbarLeftSpacing",void 0,i.U.ot),r=i.O.sn||i.O.I?w("AsriTopbarRightSpacing"):w("AsriTopbarRightSpacing",i.U.it);const n=document.createElementNS("http://www.w3.org/2000/svg","svg");null==r||r.appendChild(n.cloneNode(!0)),null==s||s.appendChild(n.cloneNode(!0)),null==l||l.appendChild(n.cloneNode(!0))},t.Hn=function(){return c(this,void 0,void 0,(function*(){l&&r&&(l.style.setProperty("width","0px"),r.style.setProperty("width","0px"),yield y("initials"),l.style.removeProperty("width"),r.style.removeProperty("width"))}))};const o=e(629),i=e(49),u=e(937);let s,l,r,a,d,f,m,_,b,v,h=i.U.toolbar,p=!1;function y(){return c(this,arguments,void 0,(function*(n="rect",...t){const e=i.U.ut||(yield(0,o.l)("#drag"));return!e||i.O.Qn?-1:new Promise((c=>{"initials"===n?(t.length&&!t.includes("L")||(b=e.getBoundingClientRect().left,c(b)),t.length&&!t.includes("R")||(v=e.getBoundingClientRect().right,c(v))):(d=e.getBoundingClientRect(),c(d))}))}))}function w(n,t=void 0,e=void 0){if(document.getElementById(n))return;if(!i.U.toolbar)return;let c=document.createElement("div");return c.id=n,t?i.U.toolbar.insertBefore(c,t):e?i.U.toolbar.insertBefore(c,e.nextSibling):i.U.toolbar.appendChild(c),c}},130:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.vn=function(){o.O.sn&&(o.O.I||i(16),o.O.Qn&&i(14))},t.Tn=function(){o.O.sn&&(o.O.I||i(8),o.O.Qn&&i(8,13))};const c=e(571),o=e(49);function i(n,t=n){c.remote&&c.remote.getCurrentWindow().setWindowButtonPosition({x:n,y:t})}},613:function(n,t){var e=this&&this.__awaiter||function(n,t,e,c){return new(e||(e=Promise))((function(o,i){function u(n){try{l(c.next(n))}catch(n){i(n)}}function s(n){try{l(c.throw(n))}catch(n){i(n)}}function l(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}l((c=c.apply(n,t||[])).next())}))};function c(n){return e(this,void 0,void 0,(function*(){let t=yield n;return 0===t.code?t.data:null}))}function o(n,t){return e(this,void 0,void 0,(function*(){let e=null;return yield fetch(n,{body:JSON.stringify(t),method:"POST",headers:{Authorization:"Token "}}).then((function(n){e=n.json()})),e}))}Object.defineProperty(t,"__esModule",{value:!0}),t.getFile=function(n){return e(this,void 0,void 0,(function*(){const t=yield fetch("/api/file/getFile",{method:"POST",headers:{Authorization:"Token ''"},body:JSON.stringify({path:n})});return t.ok?t:null}))},t.N=function(n,t){return e(this,arguments,void 0,(function*(n,t,e=!1,c=Date.now()){let o=new Blob([t]),i=n.split("/").pop(),u=new File([o],i),s=new FormData;s.append("path",n),s.append("file",u),s.append("isDir",String(e)),s.append("modTime",String(c));const l=yield fetch("/api/file/putFile",{body:s,method:"POST",headers:{Authorization:"Token ''"}});return l.ok?yield l.json():null}))},t._=function(n,t){return e(this,void 0,void 0,(function*(){return c(o("/api/attr/setBlockAttrs",{id:n,attrs:t}))}))},t.m=function(n){return e(this,void 0,void 0,(function*(){return c(o("/api/attr/getBlockAttrs",{id:n}))}))}},571:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.remote=void 0;const c=e(49);t.remote=c.O.I||c.O.A?null:e(21)},796:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Cn=void 0;t.Cn=class{constructor(n){this.st=n}start(n,t,e=!1){n.addEventListener(t,this.st,e)}remove(n,t,e=!1){n.removeEventListener(t,this.st,e)}}},937:function(n,t,e){var c=this&&this.__awaiter||function(n,t,e,c){return new(e||(e=Promise))((function(o,i){function u(n){try{l(c.next(n))}catch(n){i(n)}}function s(n){try{l(c.throw(n))}catch(n){i(n)}}function l(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}l((c=c.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.h=t.lt=t.$n=void 0,t.Jn=s,t.K=function(n){const t="B"===n?u.U.Zn:"L"===n?u.U.W:u.U.Xn;return!(!t||t.classList.contains("layout--float"))},t.Y=function(n){const t="B"===n?u.U.Zn:"L"===n?u.U.W:u.U.Xn;let e;if(!t)return!1;e="B"===n?t.style.height:t.style.width;return!(!e||"0px"===e)},t.nt=function(n="L"){const t="B"===n?u.U.Z:"L"===n?u.U.J:u.U.q;return!(!t||!t.classList.contains("fn__none"))},t.X=function(){return c(this,void 0,void 0,(function*(){return u.U.Z||(yield(0,i.l)(".layout__dockb")),!(!u.U.Z||u.U.Z.classList.contains("fn__none"))}))},t.isFullScreen=function(){return!(!o.remote||!o.remote.getCurrentWindow().isFullScreen())},t.Kn=function(){return!(!u.U.status||!u.U.status.classList.contains("fn__none"))},t.pn=function(){return c(this,void 0,void 0,(function*(){return yield(0,i.rt)('.layout__center [data-type="wnd"]').then((n=>{t.h=n})),t.h}))};const o=e(571),i=e(629),u=e(49);function s(){var n,e;u.U.toolbar&&(t.$n=(null===(n=u.U.toolbar)||void 0===n?void 0:n.scrollWidth)>u.U.toolbar.clientWidth,(null===(e=u.U.dt)||void 0===e?void 0:e.classList.contains("fn__none"))||(t.$n=!0))}t.$n=!1,t.lt=(0,i.M)(s),t.h=document.querySelectorAll('.layout__center [data-type="wnd"]')},629:function(n,t){var e=this&&this.__awaiter||function(n,t,e,c){return new(e||(e=Promise))((function(o,i){function u(n){try{l(c.next(n))}catch(n){i(n)}}function s(n){try{l(c.throw(n))}catch(n){i(n)}}function l(n){var t;n.done?o(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,s)}l((c=c.apply(n,t||[])).next())}))};function c(n,t){let e=!1;return n&&t&&(e=n.right>t.left&&n.bottom>t.top&&n.left<t.left+t.width&&n.top<t.top+t.height),e}Object.defineProperty(t,"__esModule",{value:!0}),t.ft=function(n,t){n.includes(t)||n.push(t)},t.M=function(n,t=200){let e=null;return(...c)=>{e&&clearTimeout(e),e=setTimeout((()=>{n(...c),e=null}),t)}},t.B=function(n){if(!n)return;const t=parseInt(n.substring(1,3),16)/255,e=parseInt(n.substring(3,5),16)/255,c=parseInt(n.substring(5,7),16)/255,o=Math.max(t,e,c),i=Math.min(t,e,c),u=(o+i)/2;if(o===i)return{_t:0,s:0,bt:u};let s=0;const l=o-i,r=u>.5?l/(2-o-i):l/(o+i);switch(o){case t:s=(e-c)/l+(e<c?6:0);break;case e:s=(c-t)/l+2;break;case c:s=(t-e)/l+4}return s/=6,{_t:s,s:r,bt:u}},t.D=function(n){if(!n)return;4===(n=n.replace(/^#/,"")).length?n.substring(0,3):8===n.length&&n.substring(0,6);3===n.length&&(n=n.split("").map((function(n){return n+n})).join(""));let t=parseInt(n.slice(0,2),16)/255,e=parseInt(n.slice(2,4),16)/255,c=parseInt(n.slice(4,6),16)/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,c=c>.04045?Math.pow((c+.055)/1.055,2.4):c/12.92;let o=.4124564*t+.3575761*e+.1804375*c,i=.2126729*t+.7151522*e+.072175*c,u=.0193339*t+.119192*e+.9503041*c,s=.8189330101*o+.3618667424*i-.1288597137*u,l=.0329845436*o+.9293118715*i+.0361456387*u,r=.0482003018*o+.2643662691*i+.633851707*u;return s=Math.cbrt(s),l=Math.cbrt(l),r=Math.cbrt(r),.2104542553*s+.793617785*l-.0040720468*r},t.Gn=function(n,t){if(!n||!t)return!1;let e,o;e=n.getBoundingClientRect(),o=t.getBoundingClientRect();return c(e,o)},t.vt=function(n,t){return e(this,void 0,void 0,(function*(){return!(!n||!t)&&new Promise((e=>{let o,i;o=n.getBoundingClientRect(),i=t.getBoundingClientRect();e(c(o,i))}))}))},t.ht=function(n,t){if(!n.length||!t.length)return!1;const e=new Set(n),c=new Set(t);if(e.size!==c.size)return!1;for(const n of e)if(!c.has(n))return!1;return!0},t.l=function(n){return e(this,arguments,void 0,(function*(n,t=document,e=10,c=200){let o=0;for(;o<e;){const e=t.querySelector(n);if(e)return e;yield new Promise((n=>setTimeout(n,c))),o++}}))},t.rt=function(n){return e(this,arguments,void 0,(function*(n,t=document,e=10,c=200){let o=0;for(;o<e;){const e=t.querySelectorAll(n);if(e.length>0)return e;yield new Promise((n=>setTimeout(n,c))),o++}}))}},766:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.xn=t.Ln=t.Rn=void 0;t.Rn=class{constructor(n){this.st=(t,e)=>n(t,e),this.yt=new ResizeObserver(this.st)}observe(n,t){this.yt.observe(n,t)}disconnect(n){this.yt.disconnect(),n&&n()}unobserve(n){this.yt.unobserve(n)}};t.Ln=class{constructor(n){this.st=(t,e)=>n(t,e),this.wt=new MutationObserver(this.st)}observe(n,t){this.wt.observe(n,t)}disconnect(n){this.wt.disconnect(),n&&n()}},t.xn={attributes:!0,subtree:!0,attributeFilter:["class"],attributeOldValue:!0}},49:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.O=t.U=void 0;const e=navigator.userAgent;let c=null,o=null,i=null,u=null,s=null,l=null,r=null,a=null,d=null,f=null,m=null,_=null,b=null,v=null,h=null,p=null,y=null,w=null;t.U={get Yn(){return null!=c?c:c=document.getElementById("layouts")},get kn(){return null!=o?o:o=document.querySelector(".layout__center")},get toolbar(){return null!=i?i:i=document.getElementById("toolbar")},get J(){return null!=u?u:u=document.getElementById("dockLeft")},get q(){return null!=s?s:s=document.getElementById("dockRight")},get Z(){return null!=l?l:l=document.getElementById("dockBottom")},get status(){return null!=r?r:r=document.getElementById("status")},get W(){return null!=a?a:a=document.querySelector(".layout__dockl")},get Xn(){return null!=d?d:d=document.querySelector(".layout__dockr")},get Zn(){return null!=f?f:f=document.querySelector(".layout__dockb")},get ct(){return null!=m?m:m=document.getElementById("barSync")},get ot(){return null!=_?_:_=document.getElementById("barForward")},get gt(){return null!=b?b:b=document.getElementById("toolbarVIP")},get ut(){return null!=v?v:v=document.getElementById("drag")},get xt(){return null!=h?h:h=document.getElementById("barPlugins")},get it(){return null!=p?p:p=document.getElementById("barSearch")},get Mt(){return null!=y?y:y=document.getElementById("barMode")},get dt(){return null!=w?w:w=document.getElementById("barMore")}},t.O={sn:navigator.platform.indexOf("Mac")>-1,j:navigator.platform.indexOf("Linux")>-1,ln:/Android/.test(e),A:!!document.getElementById("sidebar"),I:!e.startsWith("SiYuan")||e.indexOf("iPad")>-1||/Android/.test(e)&&!/(?:Mobile)/.test(e),Qn:document.body.classList.contains("body--window"),rn:(/iOS/i.test(e)||/iPad/i.test(e))&&/AppleWebKit/i.test(e)&&e.startsWith("SiYuan/"),lang:window.siyuan.config.lang,P:CSS.supports("color","oklch(from red calc(l * 0.5) 0 h)"),an:window.siyuan.config.readonly,$:window.siyuan.config.appearance.mode>0?"dark":"light",dn:/^((?!chrome|android).)*safari/i.test(e)}},21:n=>{n.exports=require("@electron/remote")}},t={};function e(c){var o=t[c];if(void 0!==o)return o.exports;var i=t[c]={exports:{}};return n[c].call(i.exports,i,i.exports,e),i.exports}(()=>{const n=e(2);(0,n._n)(),window.destroyTheme=()=>{let t=!0;setTimeout((()=>{const e=window.siyuan.config.appearance.themeLight,c=window.siyuan.config.appearance.themeDark;"Asri"===e&&"Asri"===c&&(t=!1),(0,n.Sn)(t)}),0)}})()})();
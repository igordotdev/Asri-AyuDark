(()=>{"use strict";var n={2:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,s){function u(n){try{r(o.next(n))}catch(n){s(n)}}function c(n){try{r(o.throw(n))}catch(n){s(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.t=function(){return o(this,void 0,void 0,(function*(){(0,m.o)(),(0,v.i)(),(0,w.u)(),(0,p.l)(),(0,b.m)(),yield(0,l._)(),(0,l.v)(),r.p.h||(yield(0,s.k)(),yield(0,g.M)("initials"),(0,g.O)()),L(),(0,d.j)(),y.start(document,"mouseup"),k.start(document,"dragend"),x.start(document,"keyup",!0),M.start(window,"focus"),M.start(window,"blur"),O.start(document,"selectionchange"),j.observe(document.body,c.C),P.start(_.S,"change"),l.P.start(document,"mouseup"),l.A.start(document,"mouseup"),r.$.I||(yield(0,u.L)(".layout__center")),r.p.h||(C.observe(r.$.I),S.observe(document.body))}))},t.B=function(){return o(this,arguments,void 0,(function*(n=!0){var t;n&&(r.p.h||(yield(0,g.T)()),(0,d.R)(),(0,h.N)(),(0,a.F)(),(0,d.V)(),(0,b.D)(),(0,f.H)(),(0,p.U)(),(0,p.J)(),(0,m.W)(),(0,v.q)(),(0,w.K)(),document.body.classList.remove("body-asri--fullscreen","asri-tfp","asri-tfp-acrylic","asri-tfp-progressive"),(0,l.Y)()),y.remove(document,"mouseup"),k.remove(document,"dragend"),x.remove(document,"keyup",!0),M.remove(window,"focus"),M.remove(window,"blur"),O.remove(document,"selectionchange"),j.disconnect(),P.remove(_.S,"change"),l.P.remove(document,"mouseup"),l.A.remove(document,"mouseup"),r.p.h||(C.disconnect(),S.disconnect()),null===(t=document.querySelectorAll("#snippetCSS-asri-var-root"))||void 0===t||t.forEach((n=>n.remove()))}))};const i=e(796),s=e(937),u=e(629),c=e(766),r=e(49),a=e(12),l=e(689),d=e(818),m=e(261),f=e(54),_=e(288),b=e(863),v=e(832),h=e(844),p=e(414),g=e(376),w=e(130),y=new i.G($),k=new i.G($),x=new i.G($),M=new i.G((function(n){(0,s.k)().then((()=>{L(),!r.p.X&&l.followSysAccentColor&&r.p.Z&&(0,l.nn)()}))})),O=new i.G(f.tn),j=new c.en((function(n,t){return o(this,void 0,void 0,(function*(){var t,e;for(let o of n){const n=o.target;if(n.classList.contains("body--blur"))return;if(n.classList.contains("b3-list-item--focus")&&(0,h.sn)(),n.classList.contains("item--focus")){const e=null!==(t=n.getAttribute("data-id"))&&void 0!==t?t:void 0;(0,b.m)(e)}if(n.classList.contains("layout__wnd--active")){const t=n.querySelector(".layout__center .layout-tab-container>[data-id]:not(.fn__none)");if(!t)return;const o=null!==(e=t.getAttribute("data-id"))&&void 0!==e?e:void 0;(0,b.m)(o)}}}))})),C=new c.un((function(n,t){(0,g.cn)(0,A,s.rn).then(g.an),(0,a.ln)(),(0,p.dn)()})),S=new c.un((function(n,t){for(let t of n){A=!0,B();const{inlineSize:n}=t.contentBoxSize[0];if(t.target instanceof HTMLElement){if(!t.target.dataset.mn){t.target.dataset.mn=n+"";continue}const e=n-parseFloat(t.target.dataset.mn);t.target.dataset.mn=n+"",I=e}}})),P=new i.G((function(n){(0,_.fn)(600,(()=>{}),200)}));let A=!1,I=0;function $(n){(0,l._n)(n),(0,a.bn)(n),L(n),(0,_.vn)(n)}function L(n){return o(this,void 0,void 0,(function*(){function t(){setTimeout((()=>o(this,void 0,void 0,(function*(){(0,d.hn)(),(0,p.dn)(),(0,p.l)(),yield(0,s.k)(),(0,a.pn)(),(0,d.j)(),!r.p.X&&l.followSysAccentColor&&r.p.Z&&(0,l.nn)()}))),0)}n?(n.type.startsWith("mouse")||n.type.startsWith("drag")||n instanceof KeyboardEvent&&("Control"===n.key||"Alt"===n.key||"Shift"===n.key||"Meta"===n.key))&&(t(),Promise.resolve().then((()=>((0,g.gn)(),(0,g.cn)(0,!1,s.rn)))).then(g.an)):(t(),(0,g.cn)().then(g.an))}))}const B=(0,u.wn)((()=>{A=!1,(0,g.yn)(),(0,s.kn)(),s.rn||(0,g.gn)(),(0,g.cn)(I,A,s.rn).then(g.an),I=0}),200)},8:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.xn=t.Mn=t.On=t.jn=t.Cn=t.Sn=t.Pn=t.An=t.In=t.$n=t.Ln=t.Bn=t.Tn=t.Rn=t.Nn=t.Fn=t.zn=t.Vn=t.Dn=t.Hn=t.En=t.Un=t.followSysAccentColor=t.Jn=t.Wn=t.qn=t.i18n=t.Kn=void 0,t.Wn=!1,t.Jn=!1,t.followSysAccentColor=!1;t.Rn=n=>{t.Kn=n};t.Tn=n=>{t.i18n=n};t.Bn=n=>{t.qn=n};t.Ln=n=>{t.Wn=n};t.$n=n=>{t.Jn=n};t.In=n=>{t.followSysAccentColor=n};t.An=n=>{t.Un=n};t.Pn=n=>{t.En=n};t.Sn=n=>{t.Hn=n};t.Cn=n=>{t.Dn=n};t.jn=n=>{t.Vn=n};t.On=n=>{t.zn=n};t.Mn=n=>{t.Fn=n};t.xn=n=>{t.Nn=n}},12:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,s){function u(n){try{r(o.next(n))}catch(n){s(n)}}function c(n){try{r(o.throw(n))}catch(n){s(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ln=void 0,t.pn=d,t.bn=function(n){return o(this,void 0,void 0,(function*(){var t,e,u;if("mouseup"!==n.type)return;l||(l=yield(0,c.Yn)());const d=n.target,m=d.closest(".ariaLabel");if(!m)return;const f=m.dataset.type,_=d.closest(".protyle-title__icon")||"doc"===m.dataset.type?"doc":void 0,b=r.includes(f)?f:_;if(!b)return;const v="doc"===b?null!==(t=m.parentElement.dataset.nodeId)&&void 0!==t?t:null===(u=null===(e=m.closest(".protyle"))||void 0===e?void 0:e.querySelector(".protyle-title"))||void 0===u?void 0:u.dataset.nodeId:m.dataset.nodeId;a=yield(0,s.L)("#commonMenu:not(.fn__none)"),function(n,t){o(this,void 0,void 0,(function*(){const e="doc"===n;!function(n){o(this,void 0,void 0,(function*(){var t,e;if(!a||document.getElementById("afwdMenuItem-clear"))return;const o=a.lastChild,i=document.createElement("button");i.className="b3-menu__item";const s=document.createElement("button");s.className="b3-menu__separator";const u=`\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-on">\n            <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">\n            <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m9 12l2 2l4-4"/></g>\n            </svg>\n            <span class="b3-menu__label">${l["afwdMenuItem-on"]}</span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-off">\n            <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">\n            <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m15 9l-6 6m0-6l6 6"/></g>\n            </svg>\n            <span class="b3-menu__label">${l["afwdMenuItem-off"]}</span>\n        </button>\n    `,c=`\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-all">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <svg class="b3-menu__icon" style=""></svg>\n                    <span>${l["afwdMenuItem-all"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-db">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <svg class="b3-menu__icon" style=""><use xlink:href="#iconDatabase"></use></svg>\n                    <span>${l["afwdMenuItem-db"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-t">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <svg class="b3-menu__icon" style=""><use xlink:href="#iconTable"></use></svg>\n                    <span>${l["afwdMenuItem-t"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-p">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <svg class="b3-menu__icon"><use xlink:href="#iconImage"></use></svg>\n                    <span>${l["afwdMenuItem-p"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-iframe">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <svg class="b3-menu__icon"><use xlink:href="#iconHTML5"></use></svg>\n                    <span>${l["afwdMenuItem-iframe"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n        <button class="b3-menu__item b3-menu__item--custom" id="afwdMenuItem-sb">\n            <span class="b3-menu__label">\n                <div class="fn__flex">\n                    <svg class="b3-menu__icon"><use xlink:href="#iconSuper"></use></svg>\n                    <span>${l["afwdMenuItem-sb"]}</span>\n                    <span class="fn__space fn__flex-1"></span>\n                    <input type="checkbox" class="b3-switch fn__flex-center">\n                </div>\n            </span>\n        </button>\n    `,r=`\n        <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 18 18">\n            <path fill="currentColor" d="m15.503 15.003l-.735.71a.75.75 0 1 0 1.042 1.078l1.886-1.82a1 1 0 0 0 0-1.44l-1.886-1.82a.75.75 0 0 0-1.042 1.079l.739.713H12.75a.75.75 0 0 0 0 1.5zM15 3a2 2 0 0 1 2 2v4.25a.75.75 0 0 1-1.5 0V5a.5.5 0 0 0-.5-.5H5a.5.5 0 0 0-.5.5v4.25a.75.75 0 0 1-1.5 0V5a2 2 0 0 1 2-2zM5.234 15.712l-.735-.71h2.752a.75.75 0 1 0 0-1.5H4.495l.739-.713a.75.75 0 0 0-1.042-1.078l-1.886 1.82a1 1 0 0 0 0 1.44l1.886 1.82a.75.75 0 0 0 1.042-1.079"/>\n        </svg>\n        <span class="b3-menu__label">${l.afwdDocMenuLabel}</span>\n        <svg class="b3-menu__icon b3-menu__icon--small">\n            <use xlink:href="#iconRight"></use>\n        </svg>\n        <div class="b3-menu__submenu">\n            <div class="b3-menu__items">\n                ${"doc"===n?c:u}\n                <button class="b3-menu__separator"></button>\n                <button class="b3-menu__item" id="afwdMenuItem-clear">\n                    <svg class="b3-menu__icon " style=""><use xlink:href="#iconTrashcan"></use></svg>\n                    <span class="b3-menu__label">${l["afwdMenuItem-clear"]}\n                    </span>\n                </button>\n            </div>\n        </div>\n    `;if(i.innerHTML=r,o.insertBefore(i,null===(t=o.lastChild)||void 0===t?void 0:t.previousSibling),o.insertBefore(s,i),"doc"!==n)return;const d=document.createElement("button");d.className="b3-menu__item";const m=`\n        <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 22 22">\n            <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 5h-3m-5 0h5m-5 0v10m0-10h-1c-1.667 0-5 1-5 5s3.333 5 5 5h1m0 4v-4m5 4V5"/>\n        </svg>\n        <span class="b3-menu__label">${l.tdirDocMenuLabel}</span>\n        <svg class="b3-menu__icon b3-menu__icon--small">\n            <use xlink:href="#iconRight"></use>\n        </svg>\n        <div class="b3-menu__submenu">\n            <div class="b3-menu__items">\n                <button class="b3-menu__item b3-menu__item--custom" id="tdirMenuItem-ltr">\n                    <svg class="b3-menu__icon " style=""><use xlink:href="#iconLtr"></use></svg>\n                    <span class="b3-menu__label">${l["tdirMenuItem-ltr"]}</span>\n                </button>\n                <button class="b3-menu__item b3-menu__item--custom" id="tdirMenuItem-rtl">\n                    <svg class="b3-menu__icon " style=""><use xlink:href="#iconRtl"></use></svg>\n                    <span class="b3-menu__label">${l["tdirMenuItem-rtl"]}</span>\n                </button>                \n                <button class="b3-menu__separator"></button>\n                <button class="b3-menu__item" id="tdirMenuItem-clear">\n                    <svg class="b3-menu__icon " style=""><use xlink:href="#iconTrashcan"></use></svg>\n                    <span class="b3-menu__label">${l["afwdMenuItem-clear"]}\n                    </span>\n                </button>\n            </div>\n        </div>\n    `;d.innerHTML=m,o.insertBefore(d,null===(e=o.lastChild)||void 0===e?void 0:e.previousSibling)}))}(n);const s=yield(0,i.Gn)(t);let u=s["custom-afwd"],c=s["custom-tdir"];if(u||(u=""),c||(c=""),u=u.split(" "),u.length>0)if(e){if(u.forEach((n=>{const t=document.getElementById(`afwdMenuItem-${n}`);t&&(t.querySelector("input").checked=!0)})),u.includes("all")){const n=null==a?void 0:a.querySelectorAll("button[id^=afwdMenuItem]:not(#afwdMenuItem-all, #afwdMenuItem-clear)");null==n||n.forEach((n=>{n.classList.add("b3-menu__item--disabled"),n.querySelector("input").disabled=!0}))}}else{const n=document.getElementById(`afwdMenuItem-${u[0]}`);n&&n.classList.add("b3-menu__item--selected")}if(c.length&&e){const n=document.getElementById(`tdirMenuItem-${c}`);n&&n.classList.add("b3-menu__item--selected")}!function(n,t,e,o){const s=null==a?void 0:a.querySelectorAll("button[id^=afwdMenuItem]:not(#afwdMenuItem-clear)"),u=null==a?void 0:a.querySelectorAll("button[id^=tdirMenuItem]:not(#tdirMenuItem-clear)");let c=[];const r=[...s].filter((n=>"afwdMenuItem-all"!==n.id));n?(null==s||s.forEach((n=>{n.onclick=o=>{if(n.classList.contains("b3-menu__item--disabled"))return;const s=n.querySelector("input"),u=n.id.split("-")[1];let a=s.checked;o.target===s?a=!a:s.checked=!a,a?"all"===u?(r.forEach((n=>{n.classList.remove("b3-menu__item--disabled"),n.querySelector("input").disabled=!1})),e=c.length>0?c:[]):e=e.filter((n=>n!==u)):"all"===u?(e.includes("all")||(c=e),e=["all"],r.forEach((n=>{n.classList.add("b3-menu__item--disabled"),n.querySelector("input").disabled=!0}))):e.push(u),(0,i.Qn)(t,{"custom-afwd":e.join(" ")||""})}})),null==u||u.forEach(((n,e,s)=>{n.onclick=()=>{const u=n.id.split("-")[1];n.classList.contains("b3-menu__item--selected")?(n.classList.remove("b3-menu__item--selected"),o=[]):(o=[u],n.classList.add("b3-menu__item--selected"),s[1-e].classList.remove("b3-menu__item--selected")),(0,i.Qn)(t,{"custom-tdir":`${o.join("")}`})}}))):null==s||s.forEach(((n,o,s)=>{n.onclick=()=>{const u=n.id.split("-")[1];n.classList.contains("b3-menu__item--selected")?(e=[],n.classList.remove("b3-menu__item--selected")):(e=[u],n.classList.add("b3-menu__item--selected"),s[1-o].classList.remove("b3-menu__item--selected")),(0,i.Qn)(t,{"custom-afwd":(null==e?void 0:e.join(" "))||""})}}));const l=document.getElementById("afwdMenuItem-clear");if(!l)return;if(l.onclick=()=>{e=[],c=[],(0,i.Qn)(t,{"custom-afwd":""}),s.forEach((t=>{if(t.classList.remove("b3-menu__item--disabled"),t.classList.remove("b3-menu__item--selected"),n){const n=t.querySelector("input");n.disabled=!1,n.checked=!1}}))},!n)return;const d=document.getElementById("tdirMenuItem-clear");if(!d)return;d.onclick=()=>{o=[],(0,i.Qn)(t,{"custom-tdir":""}),u.forEach((n=>{n.classList.remove("b3-menu__item--selected")}))}}(e,t,u,c)}))}(b,v)}))},t.F=function(){null===u.Xn||void 0===u.Xn||u.Xn.forEach((n=>{(n.querySelector(".file-tree")?[]:n.querySelectorAll(".protyle-wysiwyg")).forEach((n=>{n.style.removeProperty("--protyle-spacing"),n.dataset.Zn=void 0}))}))};const i=e(613),s=e(629),u=e(937),c=e(689);t.ln=(0,s.wn)(d,200);const r=["NodeParagraph","NodeTable","NodeAttributeView","NodeSuperBlock","NodeVideo","NodeWidget","NodeIFrame"];let a,l=c.i18n;function d(){null===u.Xn||void 0===u.Xn||u.Xn.forEach((n=>{let t=n.querySelector(".file-tree")?[]:n.querySelectorAll(".protyle-wysiwyg");setTimeout((()=>{t.forEach((n=>{let t;t=n.style.paddingLeft,t!==n.dataset.Zn&&(n.style.setProperty("--protyle-spacing",t),n.dataset.Zn=t)}))}),300)}))}},21:n=>{n.exports=require("@electron/remote")},49:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.p=t.$=void 0;const e=navigator.userAgent;let o=null,i=null,s=null,u=null,c=null,r=null,a=null,l=null,d=null,m=null,f=null,_=null,b=null,v=null,h=null,p=null,g=null,w=null;t.$={get nt(){return null!=o?o:o=document.getElementById("layouts")},get I(){return null!=i?i:i=document.querySelector(".layout__center")},get toolbar(){return null!=s?s:s=document.getElementById("toolbar")},get tt(){return null!=u?u:u=document.getElementById("dockLeft")},get et(){return null!=c?c:c=document.getElementById("dockRight")},get ot(){return null!=r?r:r=document.getElementById("dockBottom")},get status(){return null!=a?a:a=document.getElementById("status")},get it(){return null!=l?l:l=document.querySelector(".layout__dockl")},get st(){return null!=d?d:d=document.querySelector(".layout__dockr")},get ut(){return null!=m?m:m=document.querySelector(".layout__dockb")},get ct(){return null!=f?f:f=document.getElementById("barSync")},get rt(){return null!=_?_:_=document.getElementById("barForward")},get lt(){return null!=b?b:b=document.getElementById("toolbarVIP")},get dt(){return null!=v?v:v=document.getElementById("drag")},get ft(){return null!=h?h:h=document.getElementById("barPlugins")},get _t(){return null!=p?p:p=document.getElementById("barSearch")},get bt(){return null!=g?g:g=document.getElementById("barMode")},get vt(){return null!=w?w:w=document.getElementById("barMore")}},t.p={ht:navigator.platform.indexOf("Mac")>-1,gt:navigator.platform.indexOf("Linux")>-1,wt:/Android/.test(e),h:!!document.getElementById("sidebar"),yt:!e.startsWith("SiYuan")||e.indexOf("iPad")>-1||/Android/.test(e)&&!/(?:Mobile)/.test(e),kt:document.body.classList.contains("body--window"),X:(/iOS/i.test(e)||/iPad/i.test(e))&&/AppleWebKit/i.test(e)&&e.startsWith("SiYuan/"),lang:window.siyuan.config.lang,Z:CSS.supports("color","oklch(from red calc(l * 0.5) 0 h)"),xt:window.siyuan.config.readonly,Mt:window.siyuan.config.appearance.mode>0?"dark":"light",Ot:/^((?!chrome|android).)*safari/i.test(e)}},54:(n,t)=>{function e(){document.querySelectorAll(".asri-selected-block").forEach((n=>n.classList.remove("asri-selected-block")))}Object.defineProperty(t,"__esModule",{value:!0}),t.tn=function(n){const t=new Promise((n=>{const t=()=>{document.removeEventListener("mouseup",t,!0),n()};document.addEventListener("mouseup",t,!0)})),o=new Promise((n=>{setTimeout(n,300)})),i=new Promise((n=>{const t=()=>{document.removeEventListener("keyup",t,!0),n()};document.addEventListener("keyup",t,!0)}));Promise.race([t,i,o]).then((()=>{const n=window.getSelection(),t=n&&n.rangeCount>0?n.getRangeAt(0):null;if(!t)return;const o=t.commonAncestorContainer.parentElement,i=o?o.closest("[data-node-id]"):null;if(!i)return;const s=i.getAttribute("data-type");e(),s&&!["NodeAttributeView","NodeCodeBlock","NodeList","NodeHTMLBlock"].includes(s)&&i.classList.add("asri-selected-block")}))},t.H=e},105:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,s){function u(n){try{r(o.next(n))}catch(n){s(n)}}function c(n){try{r(o.throw(n))}catch(n){s(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Yn=function(){return o(this,void 0,void 0,(function*(){let n;try{n=["zh_CN","zh_CHT","en_US","ar_SA"].includes(i.p.lang)?yield fetch(`/appearance/themes/Asri/i18n/${i.p.lang}.json`):yield fetch("/appearance/themes/Asri/i18n/en_US.json");return yield n.json()}catch(n){throw n}}))};const i=e(49)},130:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.u=function(){i.p.ht&&(i.p.yt||s(16),i.p.kt&&s(14))},t.K=function(){i.p.ht&&(i.p.yt||s(8),i.p.kt&&s(8,13))};const o=e(571),i=e(49);function s(n,t=n){o.remote&&o.remote.getCurrentWindow().setWindowButtonPosition({x:n,y:t})}},138:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,s){function u(n){try{r(o.next(n))}catch(n){s(n)}}function c(n){try{r(o.throw(n))}catch(n){s(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.v=function(){return o(this,void 0,void 0,(function*(){if((0,r.Rn)(i.p.Mt),yield(0,u.jt)(),i.p.Z){if(i.p.yt||i.p.h||i.p.gt?(a.Ct.setProperty("--asri-user-custom-accent",u.St[i.p.Mt].userCustomColor),(0,l.Pt)(u.St[i.p.Mt].userCustomColor)):r.followSysAccentColor?a.Ct.removeProperty("--asri-user-custom-accent"):(a.Ct.setProperty("--asri-user-custom-accent",u.St[i.p.Mt].userCustomColor),(0,l.Pt)(u.St[i.p.Mt].userCustomColor)),u.St[i.p.Mt].presetPalette){const n=u.St[i.p.Mt].presetPalette,t=c.At[n][i.p.Mt];document.documentElement.setAttribute("data-asri-palette",n.split("-")[2]),(0,r.In)(!1),a.Ct.setProperty("--asri-user-custom-accent",t.primary),a.Ct.setProperty("--asri-c-factor",t.chroma),(0,r.$n)("0"===t.chroma),(0,l.It)(t.chroma),(0,l.Pt)(t.primary)}else a.Ct.setProperty("--asri-c-factor",u.St[i.p.Mt].chroma),document.documentElement.removeAttribute("data-asri-palette"),(0,r.$n)("0"===u.St[i.p.Mt].chroma),(0,l.It)(u.St[i.p.Mt].chroma);(0,l.nn)(),u.St.features.tfp&&document.body.classList.add("asri-tfp","asri-tfp-"+u.St.features.tfp)}}))},t.Y=function(){a.Ct.removeProperty("--asri-user-custom-accent"),a.Ct.removeProperty("--asri-sys-accent-grayscale"),a.Ct.removeProperty("--asri-c-factor"),a.Ct.removeProperty("--asri-sys-accent"),a.Ct.removeProperty("--asri-sys-accent-accessible"),a.Ct.removeProperty("--asri-c-0"),a.Ct.removeProperty("--asri-on-primary-reverse"),document.querySelectorAll(".asri-config").forEach((n=>n.remove()))},t.$t=function(){return o(this,void 0,void 0,(function*(){const n=yield(0,s.Yn)();return(0,r.Tn)(n),n}))};const i=e(49),s=e(105),u=e(202),c=e(929),r=e(8),a=e(406),l=e(217)},202:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,s){function u(n){try{r(o.next(n))}catch(n){s(n)}}function c(n){try{r(o.throw(n))}catch(n){s(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.St=void 0,t.jt=function(){return o(this,void 0,void 0,(function*(){yield(0,i.getFile)("/data/snippets/Asri.config.json").then((n=>n&&200===n.status?n.json():null)).then((n=>{var e,o,i;if(!n)return;for(let e in t.St)e in n||(n[e]=t.St[e]);const c=["light","dark"];for(const s of c)t.St[s].followSysAccentColor=!!n[s].followSysAccentColor,t.St[s].chroma=null!==(e=n[s].chroma)&&void 0!==e?e:"1",t.St[s].userCustomColor=null!==(o=n[s].userCustomColor)&&void 0!==o?o:"#3478f6",t.St[s].presetPalette=null!==(i=n[s].presetPalette)&&void 0!==i?i:"";t.St.features=n.features,(0,u.In)(!!n[s.p.Mt].followSysAccentColor)}))}))},t.Lt=function(){return o(this,void 0,void 0,(function*(){yield(0,i.Bt)("/data/snippets/Asri.config.json",JSON.stringify(t.St,void 0,4))}))};const i=e(613),s=e(49),u=e(8);t.St={light:{followSysAccentColor:!1,chroma:"1",userCustomColor:"#3478f6",presetPalette:""},dark:{followSysAccentColor:!1,chroma:"1",userCustomColor:"#3478f6",presetPalette:""},features:{tfp:""}}},217:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.nn=function(){if(!(s.p.yt||s.p.h||s.p.gt)){const n="#"+o.remote.systemPreferences.getAccentColor().slice(0,6),t=(0,i.Tt)(n);if(!t)return;c.qn!==n&&(u.Ct.setProperty("--asri-sys-accent",n),t.s>.28?u.Ct.setProperty("--asri-sys-accent-accessible",n):u.Ct.removeProperty("--asri-sys-accent-accessible"),(0,c.Ln)(0===t.s),(0,c.Bn)(n)),c.followSysAccentColor&&(r(t.s),l(n))}},t.It=r,t.Pt=l;const o=e(571),i=e(629),s=e(49),u=e(406),c=e(8);function r(n){return"0"===String(n)||c.followSysAccentColor&&c.Wn||c.Jn?(u.Ct.setProperty("--asri-c-0","0"),!0):(u.Ct.removeProperty("--asri-c-0"),!1)}const a="light"===s.p.Mt?.81:.79;function l(n){const t=(0,i.Rt)(n);t&&(t>a?u.Ct.setProperty("--asri-on-primary-reverse","light"===s.p.Mt?".4":".3"):u.Ct.removeProperty("--asri-on-primary-reverse"))}},261:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.o=function(){i.forEach((({Nt:n,className:t})=>{n&&document.body.classList.add(t)}))},t.W=function(){i.forEach((({className:n})=>{document.body.classList.remove(n)}))};const o=e(49),i=[{Nt:o.p.ht,className:"body-asri--mac"},{Nt:o.p.gt,className:"body-asri--linux"},{Nt:o.p.h,className:"body-asri--mobile"},{Nt:o.p.yt,className:"body-asri--browser"},{Nt:o.p.wt,className:"body-asri--android"},{Nt:o.p.X,className:"body-asri--iosApp"},{Nt:o.p.xt,className:"body-asri--readOnly"},{Nt:o.p.Ot,className:"body-asri--safari"}]},276:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,s){function u(n){try{r(o.next(n))}catch(n){s(n)}}function c(n){try{r(o.throw(n))}catch(n){s(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t._n=function(n){return o(this,void 0,void 0,(function*(){var t,e;if("mouseup"!==n.type)return;if(!n.target.closest(".toolbar__item"))return;if(document.querySelector(".asri-config"))return;let o=yield(0,i.L)('#commonMenu[data-name="barmode"] .b3-menu__items',document,2,0);if(!o)return;const d=`\n        <button class="b3-menu__separator asri-config"></button>\n        <div class="menu-item__subtitle" style="user-select: none;">${c.i18n["palette-presets"]}</div>\n        ${Object.keys(s.At).map((n=>a(n))).join("")}\n        <button class="b3-menu__separator asri-config"></button>\n        <button class="b3-menu__item asri-config" id="pickColor">\n            <svg class="b3-menu__icon"></svg>\n            <input id="asriColorPicker" type="color" value="${u.St[c.Kn].userCustomColor}">\n            <label for="asriColorPicker" class="be-menu__label">${c.i18n.pickColor}</label>\n        </button>\n        <button class="b3-menu__item asri-config" id="followSysAccent">\n            <svg class="b3-menu__icon"></svg>\n            <label for="" class="be-menu__label">${c.i18n.followSysAccent}</label>\n        </button>\n        <button class="b3-menu__item asri-config" data-type="nobg" id="asriChroma">\n            <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">\n                <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m19 11l-8-8l-8.6 8.6a2 2 0 0 0 0 2.8l5.2 5.2c.8.8 2 .8 2.8 0zM5 2l5 5m-8 6h15m5 7a2 2 0 1 1-4 0c0-1.6 1.7-2.4 2-4c.3 1.6 2 2.4 2 4" />\n            </svg>\n            <div aria-label="${c.i18n.asriChroma+(null!==(e=null!==(t=null===c.Hn||void 0===c.Hn?void 0:c.Hn.value)&&void 0!==t?t:u.St[c.Kn].chroma)&&void 0!==e?e:"1")}" class="b3-tooltips b3-tooltips__n">\n                <input style="box-sizing: border-box" type="range" id="asriChromaSlider" class="b3-slider fn__block" min="0" max="5" step="0.1" value="1">\n            </div>\n        </button>\n        <button class="b3-menu__separator asri-config"></button>\n        <button class="b3-menu__item asri-config" id="topbarFusionPlus"></button>\n`,m=document.createRange().createContextualFragment(d);o.appendChild(m),(0,c.An)(document.getElementById("followSysAccent")),(0,c.Pn)(document.getElementById("pickColor")),(0,c.Sn)(document.getElementById("asriChromaSlider")),(0,c.Cn)(c.En.querySelector("input")),(0,c.jn)(document.getElementById("topbarFusionPlus"));const f=document.getElementById("topbarFusionPlus");f&&(f.innerHTML=`\n        <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m8 10.5l6.492-6.492M13.496 16L20 9.496zm-4.91-.586L19.413 4.587M8 6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2z"/><path d="M16 16v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2"/></g></svg>\n        <span class="b3-menu__label" style="display: flex">${c.i18n.topbarFusionPlus}<svg data-position="north" class="b3-menu__icon ariaLabel asri-experimental" aria-label=${'"'+c.i18n["tfp-experimental"]+'"'} style="vertical-align: -.1em; height: .8em; width: .8em; opacity: .5; padding-inline-start: .1em; margin-right: unset;margin-inline-start: auto; margin-inline-end: 0;" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23 23"><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2M6.453 15h11.094M8.5 2h7"/></svg></span>\n        <svg class="b3-menu__icon b3-menu__icon--small">\n            <use xlink:href="#iconRight"></use>\n        </svg>\n        <div class="b3-menu__submenu">\n            <div class="b3-menu__items">\n                <button class="b3-menu__item" id="tfp-luminous">\n                    <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m8 10.5l6.492-6.492M13.496 16L20 9.496zm-4.91-.586L19.413 4.587M8 6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2z"/><path d="M16 16v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2"/></g></svg>\n                    <span class="b3-menu__label">${c.i18n["tfp-luminous"]}</span>\n                </button>\n                <button class="b3-menu__item" id="tfp-progressive">\n                    <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m8 10.5l6.492-6.492M13.496 16L20 9.496zm-4.91-.586L19.413 4.587M8 6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2z"/><path d="M16 16v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2"/></g></svg>\n                    <span class="b3-menu__label">${c.i18n["tfp-progressive"]}</span>\n                </button>                                \n                <button class="b3-menu__item" id="tfp-acrylic">\n                    <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="m8 10.5l6.492-6.492M13.496 16L20 9.496zm-4.91-.586L19.413 4.587M8 6a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2z"/><path d="M16 16v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2"/></g></svg>\n                    <span class="b3-menu__label">${c.i18n["tfp-acrylic"]}</span>\n                </button>                \n                <button class="b3-menu__separator"></button>\n                <button class="b3-menu__item" id="tfp-disable">\n                    <svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24">\n                        <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="m15 9l-6 6m0-6l6 6"/></g>\n                    </svg>\n                    <span class="b3-menu__label">${c.i18n["tfp-disable"]}</span>\n                </button>\n            </div>\n        </div>\n    `),c.Un&&c.En&&c.Hn&&c.Dn&&(l(),(0,r.Ft)())}))},t.zt=l;const i=e(629),s=e(929),u=e(202),c=e(8),r=e(848),a=n=>`<button class="b3-menu__item asri-config" id="${n}"><svg class="b3-menu__icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"><path d="M19 3h-4a2 2 0 0 0-2 2v12a4 4 0 0 0 8 0V5a2 2 0 0 0-2-2"/><path d="m13 7.35l-2-2a2 2 0 0 0-2.828 0L5.344 8.178a2 2 0 0 0 0 2.828l9 9"/><path d="M7.3 13H5a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h12m0-4v.01"/></g></svg><span class="b3-menu__label">${c.i18n[n]||n}</span></button>`;function l(){const n=document.getElementById("asriChroma");if((0,c.On)(document.getElementById("tfp-progressive")),(0,c.Mn)(document.getElementById("tfp-acrylic")),(0,c.xn)(document.getElementById("tfp-luminous")),u.St[c.Kn].presetPalette&&(null===c.En||void 0===c.En||c.En.classList.add("b3-menu__item--disabled"),null===c.Un||void 0===c.Un||c.Un.classList.add("b3-menu__item--disabled"),null==n||n.classList.add("b3-menu__item--disabled")),c.Un.classList.toggle("b3-menu__item--selected",!u.St[c.Kn].presetPalette&&c.followSysAccentColor),c.En.classList.toggle("b3-menu__item--selected",!u.St[c.Kn].presetPalette&&!c.followSysAccentColor),c.Hn.value=u.St[c.Kn].chroma||"1",c.Hn.parentElement.ariaLabel=c.i18n.asriChroma+u.St[c.Kn].chroma,u.St[c.Kn].presetPalette){const n=document.getElementById(`${u.St[c.Kn].presetPalette}`);null==n||n.classList.add("b3-menu__item--selected")}[c.zn,c.Fn,c.Nn].forEach((n=>{if(n){const t=n.id.replace("tfp-","");n.classList.toggle("b3-menu__item--selected",u.St.features.tfp===t)}}))}},288:function(n,t){var e=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,s){function u(n){try{r(o.next(n))}catch(n){s(n)}}function c(n){try{r(o.throw(n))}catch(n){s(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}r((o=o.apply(n,t||[])).next())}))};function o(){return e(this,arguments,void 0,(function*(n=600,t,o=0){if(document.startViewTransition)if(o>0){const i=n=>new Promise((t=>setTimeout(t,n)));document.startViewTransition((()=>e(this,void 0,void 0,(function*(){yield Promise.race([i(o)]),t&&t()})))).ready.then((()=>{document.documentElement.animate({opacity:[0,1]},{duration:n})}))}else{const e=document.startViewTransition(t),o=document.createElement("style");o.textContent=`\n            ::view-transition-old(root),\n            ::view-transition-new(root) {\n                animation-duration: ${n}ms;\n            }\n        `,document.head.appendChild(o),yield e.finished,o.remove()}else t&&t()}))}Object.defineProperty(t,"__esModule",{value:!0}),t.S=void 0,t.vn=function(n){return e(this,void 0,void 0,(function*(){if("mouseup"!==n.type)return;n.target.closest('[data-name="barmode"] .b3-menu__item:not([id])')&&o()}))},t.fn=o,t.S=window.matchMedia("(prefers-color-scheme: dark)")},376:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,s){function u(n){try{r(o.next(n))}catch(n){s(n)}}function c(n){try{r(o.throw(n))}catch(n){s(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.M=g,t.yn=function(){return o(this,void 0,void 0,(function*(){s.p.ht&&((0,u.isFullScreen)()?(document.body.classList.add("body-asri--fullscreen"),b-=p?0:88,p=!0):(document.body.classList.remove("body-asri--fullscreen"),null==r||r.style.setProperty("width","0px"),b=yield g("initials","L"),null==r||r.style.removeProperty("width"),p=!1))}))},t.cn=function(){return o(this,arguments,void 0,(function*(n=0,t=!1,e=!1){if(s.p.kt||s.p.h)return{Vt:!1,Dt:0};let u=s.$.I||(yield(0,i.L)(".layout__center"));return new Promise((i=>o(this,void 0,void 0,(function*(){var o,c,a,l,d,w;t&&(v+=n),b&&v||(yield g("initials")),m=u.getBoundingClientRect(),_=s.$.ct.getBoundingClientRect(),f=s.$.rt.getBoundingClientRect();let y=m.left,k=m.right,x=s.$._t.getBoundingClientRect().left;t||(y>b+8?(null==h||h.style.setProperty("--topbar-left-spacing","0"),s.p.ht&&p||(yield g("initials","L")),null==r||r.classList.remove("asri-expanded")):s.p.ht&&!s.p.yt?(h.style.setProperty("--topbar-left-spacing",y-_.right+4+"px"),null==r||r.classList.add("asri-expanded")):(h.style.setProperty("--topbar-left-spacing",y-f.right+4+"px"),null==r||r.classList.add("asri-expanded")),k<v-8&&!e?(h.style.setProperty("--topbar-right-spacing","0"),yield g("initials","R"),null===(o=s.$.et)||void 0===o||o.style.removeProperty("--avoid-topbar"),null===(c=s.$.st)||void 0===c||c.style.removeProperty("--avoid-topbar")):s.p.ht||s.p.yt?(h.style.setProperty("--topbar-right-spacing",window.innerWidth-k+1+"px"),null===(a=s.$.et)||void 0===a||a.style.setProperty("--avoid-topbar","4px"),null===(l=s.$.st)||void 0===l||l.style.setProperty("--avoid-topbar","4px")):(h.style.setProperty("--topbar-right-spacing",x-k+6+"px"),null===(d=s.$.et)||void 0===d||d.style.setProperty("--avoid-topbar","calc(var(--toolbar-height) - 6px)"),null===(w=s.$.st)||void 0===w||w.style.setProperty("--avoid-topbar","calc(var(--toolbar-height) - 6px)"))),i({Vt:!0,Dt:k})}))))}))},t.an=function(){return o(this,arguments,void 0,(function*({Vt:n,Dt:t}={Vt:!1,Dt:0}){var e,r;n&&(l=null===(e=s.$.toolbar)||void 0===e?void 0:e.getBoundingClientRect(),yield g("rect"),m=null===(r=s.$.I)||void 0===r?void 0:r.getBoundingClientRect(),(c||(c=document.getElementById("AsriPluginsIconsDivider")))&&(t<v-8?(c.style.setProperty("--container-bg","var(--b3-border-color-trans))"),c.style.left=t+"px",c.style.right="0",c.style.removeProperty("height"),c.style.removeProperty("top"),c.style.removeProperty("width")):(c.style.setProperty("--container-bg","var(--b3-border-color-trans)"),c.style.left=d.right-10+"px",c.style.width="2px",c.style.height="21px",c.style.top="13.5px")),null===u.Xn||void 0===u.Xn||u.Xn.forEach((n=>o(this,void 0,void 0,(function*(){let t,e=n.querySelector('.fn__flex-column[data-type="wnd"] > .fn__flex:first-child');if(e.classList.contains("fn__none")&&(e=yield(0,i.L)('.fn__flex-column[data-type="wnd"] > .fn__flex:first-child:not(.fn__none)',n,3)),t=null==e?void 0:e.getBoundingClientRect(),!t)return;let o=t.left<d.left?d.left-t.left-4:0,u=t.right>d.right?t.right-d.right+8:0;(0,i.Ht)(e,s.$.dt)||(0,i.Ht)(e,s.$.toolbar)?(e.style.paddingLeft=o+"px",e.style.paddingRight=u+"px",t.right-u-240<d.left&&t.left<d.left||t.left+o+240>d.right&&t.right>d.right?(e.style.paddingTop="42px",e.style.paddingLeft="0",e.style.paddingRight="0"):e.style.removeProperty("padding-top")):(e.style.removeProperty("padding-left"),e.style.removeProperty("padding-right"),e.style.removeProperty("padding-top"))})))))}))},t.T=function(){return o(this,void 0,void 0,(function*(){var n,t;yield(0,u.k)(),function(){c&&c.remove();r&&(r.remove(),r=void 0);a&&(a.remove(),a=void 0)}(),null===u.Xn||void 0===u.Xn||u.Xn.forEach((n=>{let t=n.firstElementChild;t.style.removeProperty("padding-top"),t.style.removeProperty("padding-left"),t.style.removeProperty("padding-right")})),s.$.I.dataset.mn=void 0,document.body.dataset.mn=void 0,null===(n=s.$.et)||void 0===n||n.style.removeProperty("--avoid-topbar"),null===(t=s.$.st)||void 0===t||t.style.removeProperty("--avoid-topbar")}))},t.O=function(){if(s.p.h)return;c=w("AsriPluginsIconsDivider",void 0,s.$.dt),r=s.p.ht&&!s.p.yt?w("AsriTopbarLeftSpacing",void 0,s.$.ct):w("AsriTopbarLeftSpacing",void 0,s.$.rt),a=s.p.ht||s.p.yt?w("AsriTopbarRightSpacing"):w("AsriTopbarRightSpacing",s.$._t);const n=document.createElementNS("http://www.w3.org/2000/svg","svg");null==a||a.appendChild(n.cloneNode(!0)),null==c||c.appendChild(n.cloneNode(!0)),null==r||r.appendChild(n.cloneNode(!0))},t.gn=function(){return o(this,void 0,void 0,(function*(){r&&a&&(r.style.setProperty("width","0px"),a.style.setProperty("width","0px"),yield g("initials"),r.style.removeProperty("width"),a.style.removeProperty("width"))}))};const i=e(629),s=e(49),u=e(937);let c,r,a,l,d,m,f,_,b,v,h=s.$.toolbar,p=!1;function g(){return o(this,arguments,void 0,(function*(n="rect",...t){const e=s.$.dt||(yield(0,i.L)("#drag"));return!e||s.p.kt?-1:new Promise((o=>{"initials"===n?(t.length&&!t.includes("L")||(b=e.getBoundingClientRect().left,o(b)),t.length&&!t.includes("R")||(v=e.getBoundingClientRect().right,o(v))):(d=e.getBoundingClientRect(),o(d))}))}))}function w(n,t=void 0,e=void 0){if(document.getElementById(n))return;if(!s.$.toolbar)return;let o=document.createElement("div");return o.id=n,t?s.$.toolbar.insertBefore(o,t):e?s.$.toolbar.insertBefore(o,e.nextSibling):s.$.toolbar.appendChild(o),o}},406:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Ct=t.Et=void 0;class e{constructor(){this.Ut=null;const n=document.getElementById("snippetCSS-asri-root-vars");n?(this.Jt=n,this.Wt=this.qt()):(this.Jt=document.createElement("style"),this.Jt.id="snippetCSS-asri-root-vars",document.head.appendChild(this.Jt),this.Wt=new Map),this.Kt=new Map}qt(){const n=new Map,t=this.Jt.textContent;if(!t)return n;const e=t.match(/:root\s*{([^}]*)}/);if(e){const t=e[1].split(";");for(const e of t){const[t,o]=e.split(":").map((n=>n.trim()));t&&o&&n.set(t,o)}}return n}static Yt(){return e.Gt||(e.Gt=new e),e.Gt}setProperty(n,t){this.Kt.set(n,t),this.Qt()}removeProperty(n){this.Kt.set(n,""),this.Qt()}Qt(){null!==this.Ut&&cancelAnimationFrame(this.Ut),this.Ut=requestAnimationFrame((()=>this.Xt()))}Xt(){if(0===this.Kt.size)return;let n=":root {";new Map([...this.Wt,...this.Kt]).forEach(((t,e)=>{""===t?this.Wt.delete(e):(n+=`${e}: ${t};`,this.Wt.set(e,t))})),n+="}",this.Jt.textContent=n,this.Kt.clear(),this.Ut=null}Zt(){return new Map(this.Wt)}}t.Et=e,t.Ct=e.Yt()},414:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,s){function u(n){try{r(o.next(n))}catch(n){s(n)}}function c(n){try{r(o.throw(n))}catch(n){s(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.dn=void 0,t.ne=c,t.l=function(){const n=(0,i.te)()?0:32;document.body.style.setProperty("--status-height",`${n}px`)},t.J=function(){document.body.style.removeProperty("--status-height"),setTimeout((()=>{var n,t,e;null===(n=s.$.status)||void 0===n||n.style.removeProperty("max-width"),null===(t=s.$.status)||void 0===t||t.style.removeProperty("--asri-status-transform-x"),null===(e=s.$.status)||void 0===e||e.style.removeProperty("--asri-status-transform-y")}),200)},t.ee=function(){var n,t;if(!(0,i.te)()){const e=null===(n=s.$.nt)||void 0===n?void 0:n.querySelectorAll(".layout__center .layout-tab-container"),o=s.$.status;null==e||e.forEach((n=>{let t=n.querySelector(".file-tree");t&&!t.classList.contains("fn__none")&&(0,u.Ht)(n,o)?n.style.paddingBottom="35px":n.style.removeProperty("padding-bottom")}));const i=document.getElementById("searchList"),c=document.getElementById("searchPreview");(i||c)&&((0,u.Ht)(i,o)?i.style.paddingBottom="35px":i.style.removeProperty("padding-bottom"),(0,u.Ht)(c,o)?c.style.paddingBottom="35px":c.style.removeProperty("padding-bottom"));const r=document.getElementById("viewerContainer");r&&((0,u.Ht)(r,o)?r.style.paddingBottom="35px":r.style.removeProperty("padding-bottom")),null===(t=s.$.nt)||void 0===t||t.querySelectorAll(".card__main").forEach((n=>{n&&((0,u.Ht)(n,o)?n.style.paddingBottom="35px":n.style.removeProperty("padding-bottom"))}))}},t.U=function(){var n,t;null===(n=s.$.nt)||void 0===n||n.querySelectorAll(".layout__center .layout-tab-container").forEach((n=>{n.style.removeProperty("padding-bottom")})),null===(t=s.$.nt)||void 0===t||t.querySelectorAll(".card__main").forEach((n=>{n.style.removeProperty("padding-bottom")}));const e=document.getElementById("searchList"),o=document.getElementById("searchPreview"),i=document.getElementById("viewerContainer");for(const n of[e,o,i])n&&n.style.removeProperty("padding-bottom")};const i=e(937),s=e(49),u=e(629);function c(){return o(this,void 0,void 0,(function*(){var n,t,e;if(!s.p.h&&!s.p.kt)if(s.$.status||(yield(0,u.L)("#status")),yield(0,i.oe)())null===(n=s.$.status)||void 0===n||n.style.removeProperty("max-width"),null===(t=s.$.status)||void 0===t||t.style.removeProperty("--asri-status-transform-x"),null===(e=s.$.status)||void 0===e||e.style.removeProperty("--asri-status-transform-y");else{function o(n,t){s.$.status.style.setProperty("--asri-status-transform-x",`${n}px`),s.$.status.style.setProperty("--asri-status-transform-y",`${t}px`)}let c=(s.$.nt||(yield(0,u.L)("#layouts"))).querySelector(".layout__center");if(c&&s.$.st&&!s.$.status.classList.contains(".fn__none")){let r=s.$.st.clientWidth,a=c.clientWidth,l=0;s.$.ut||(yield(0,u.L)(".layout__dockb")),l=s.$.ut&&!s.$.ut.classList.contains(".fn__none")&&(0,i.ie)("B")?-1*s.$.ut.clientHeight:0,s.$.status.style.maxWidth=a-12+"px";let d=(0,i.se)("R"),m=!(0,i.ie)("R")&&(0,i.ue)("R");d&&m?o(0,l):!d&&m?o(-40,l):d||m?d&&!m&&o(-1*r,l):o(-1*(r+40),l)}}}))}t.dn=(0,u.wn)(c)},571:(n,t,e)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.remote=void 0;const o=e(49);t.remote=o.p.yt||o.p.h?null:e(21)},613:function(n,t){var e=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,s){function u(n){try{r(o.next(n))}catch(n){s(n)}}function c(n){try{r(o.throw(n))}catch(n){s(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}r((o=o.apply(n,t||[])).next())}))};function o(n){return e(this,void 0,void 0,(function*(){let t=yield n;return 0===t.code?t.data:null}))}function i(n,t){return e(this,void 0,void 0,(function*(){let e=null;return yield fetch(n,{body:JSON.stringify(t),method:"POST",headers:{Authorization:"Token "}}).then((function(n){e=n.json()})),e}))}Object.defineProperty(t,"__esModule",{value:!0}),t.getFile=function(n){return e(this,void 0,void 0,(function*(){const t=yield fetch("/api/file/getFile",{method:"POST",body:JSON.stringify({path:n})});return t.ok?t:null}))},t.Bt=function(n,t){return e(this,arguments,void 0,(function*(n,t,e=!1,o=Date.now()){let i=new Blob([t]),s=n.split("/").pop(),u=new File([i],s),c=new FormData;c.append("path",n),c.append("file",u),c.append("isDir",String(e)),c.append("modTime",String(o));const r=yield fetch("/api/file/putFile",{body:c,method:"POST"});return r.ok?yield r.json():null}))},t.Qn=function(n,t){return e(this,void 0,void 0,(function*(){return o(i("/api/attr/setBlockAttrs",{id:n,attrs:t}))}))},t.Gn=function(n){return e(this,void 0,void 0,(function*(){return o(i("/api/attr/getBlockAttrs",{id:n}))}))}},629:function(n,t){var e=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,s){function u(n){try{r(o.next(n))}catch(n){s(n)}}function c(n){try{r(o.throw(n))}catch(n){s(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}r((o=o.apply(n,t||[])).next())}))};function o(n,t){let e=!1;return n&&t&&(e=n.right>t.left&&n.bottom>t.top&&n.left<t.left+t.width&&n.top<t.top+t.height),e}function i(n){return e(this,arguments,void 0,(function*(n,t=document,e=10,o=200){let i=0;for(;i<e;){const e=t.querySelector(n);if(e)return e;yield new Promise((n=>setTimeout(n,o))),i++}}))}Object.defineProperty(t,"__esModule",{value:!0}),t.ce=function(n,t){n.includes(t)||n.push(t)},t.wn=function(n,t=200){let e=null;return(...o)=>{e&&clearTimeout(e),e=setTimeout((()=>{n(...o),e=null}),t)}},t.Tt=function(n){if(!n)return;const t=parseInt(n.substring(1,3),16)/255,e=parseInt(n.substring(3,5),16)/255,o=parseInt(n.substring(5,7),16)/255,i=Math.max(t,e,o),s=Math.min(t,e,o),u=(i+s)/2;if(i===s)return{re:0,s:0,ae:u};let c=0;const r=i-s,a=u>.5?r/(2-i-s):r/(i+s);switch(i){case t:c=(e-o)/r+(e<o?6:0);break;case e:c=(o-t)/r+2;break;case o:c=(t-e)/r+4}return c/=6,{re:c,s:a,ae:u}},t.Rt=function(n){if(!n)return;4===(n=n.replace(/^#/,"")).length?n.substring(0,3):8===n.length&&n.substring(0,6);3===n.length&&(n=n.split("").map((function(n){return n+n})).join(""));let t=parseInt(n.slice(0,2),16)/255,e=parseInt(n.slice(2,4),16)/255,o=parseInt(n.slice(4,6),16)/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92;let i=.4124564*t+.3575761*e+.1804375*o,s=.2126729*t+.7151522*e+.072175*o,u=.0193339*t+.119192*e+.9503041*o,c=.8189330101*i+.3618667424*s-.1288597137*u,r=.0329845436*i+.9293118715*s+.0361456387*u,a=.0482003018*i+.2643662691*s+.633851707*u;return c=Math.cbrt(c),r=Math.cbrt(r),a=Math.cbrt(a),.2104542553*c+.793617785*r-.0040720468*a},t.Ht=function(n,t){if(!n||!t)return!1;let e,i;e=n.getBoundingClientRect(),i=t.getBoundingClientRect();return o(e,i)},t.le=function(n,t){return e(this,void 0,void 0,(function*(){return!(!n||!t)&&new Promise((e=>{let i,s;i=n.getBoundingClientRect(),s=t.getBoundingClientRect();e(o(i,s))}))}))},t.de=function(n,t){if(!n.length||!t.length)return!1;const e=new Set(n),o=new Set(t);if(e.size!==o.size)return!1;for(const n of e)if(!o.has(n))return!1;return!0},t.L=i,t.me=function(n){return e(this,arguments,void 0,(function*(n,t=document,e=10,o=200){let i=0;for(;i<e;){const e=t.querySelectorAll(n);if(e.length>0)return e;yield new Promise((n=>setTimeout(n,o))),i++}}))},t.fe=function(n){return e(this,void 0,void 0,(function*(){var t;if(!n){const e=yield i(".layout__center .layout-tab-bar .item--focus");n=null!==(t=null==e?void 0:e.getAttribute("data-id"))&&void 0!==t?t:void 0}const e=document.querySelector(`.layout__center .layout-tab-container>[data-id="${n}"]:not(.fn__none)`);return!e||e.classList.contains("protyle")}))}},689:function(n,t,e){var o=this&&this.__createBinding||(Object.create?function(n,t,e,o){void 0===o&&(o=e);var i=Object.getOwnPropertyDescriptor(t,e);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(n,o,i)}:function(n,t,e,o){void 0===o&&(o=e),n[o]=t[e]}),i=this&&this.__exportStar||function(n,t){for(var e in n)"default"===e||Object.prototype.hasOwnProperty.call(t,e)||o(t,n,e)},s=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,s){function u(n){try{r(o.next(n))}catch(n){s(n)}}function c(n){try{r(o.throw(n))}catch(n){s(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.followSysAccentColor=t.i18n=t.Yn=t.P=t.A=t._e=t.be=t.ve=t.he=t.pe=t.Ft=t.zt=t._n=t.Pt=t.It=t.nn=t.At=t.Lt=t.jt=t.St=t.Et=t.Ct=t.$t=t.Y=t.v=void 0,t._=function(){return s(this,void 0,void 0,(function*(){return yield(0,_.$t)()}))};var u=e(138);Object.defineProperty(t,"v",{enumerable:!0,get:function(){return u.v}}),Object.defineProperty(t,"Y",{enumerable:!0,get:function(){return u.Y}}),Object.defineProperty(t,"$t",{enumerable:!0,get:function(){return u.$t}});var c=e(406);Object.defineProperty(t,"Ct",{enumerable:!0,get:function(){return c.Ct}}),Object.defineProperty(t,"Et",{enumerable:!0,get:function(){return c.Et}});var r=e(202);Object.defineProperty(t,"St",{enumerable:!0,get:function(){return r.St}}),Object.defineProperty(t,"jt",{enumerable:!0,get:function(){return r.jt}}),Object.defineProperty(t,"Lt",{enumerable:!0,get:function(){return r.Lt}});var a=e(929);Object.defineProperty(t,"At",{enumerable:!0,get:function(){return a.At}}),i(e(8),t);var l=e(217);Object.defineProperty(t,"nn",{enumerable:!0,get:function(){return l.nn}}),Object.defineProperty(t,"It",{enumerable:!0,get:function(){return l.It}}),Object.defineProperty(t,"Pt",{enumerable:!0,get:function(){return l.Pt}});var d=e(276);Object.defineProperty(t,"_n",{enumerable:!0,get:function(){return d._n}}),Object.defineProperty(t,"zt",{enumerable:!0,get:function(){return d.zt}});var m=e(848);Object.defineProperty(t,"Ft",{enumerable:!0,get:function(){return m.Ft}}),Object.defineProperty(t,"pe",{enumerable:!0,get:function(){return m.pe}}),Object.defineProperty(t,"he",{enumerable:!0,get:function(){return m.he}}),Object.defineProperty(t,"ve",{enumerable:!0,get:function(){return m.ve}}),Object.defineProperty(t,"be",{enumerable:!0,get:function(){return m.be}}),Object.defineProperty(t,"_e",{enumerable:!0,get:function(){return m._e}}),Object.defineProperty(t,"A",{enumerable:!0,get:function(){return m.A}}),Object.defineProperty(t,"P",{enumerable:!0,get:function(){return m.P}});var f=e(105);Object.defineProperty(t,"Yn",{enumerable:!0,get:function(){return f.Yn}}),t.followSysAccentColor=!1;const _=e(138)},766:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.C=t.en=t.un=void 0;t.un=class{constructor(n){this.ge=(t,e)=>n(t,e),this.we=new ResizeObserver(this.ge)}observe(n,t){this.we.observe(n,t)}disconnect(n){this.we.disconnect(),n&&n()}unobserve(n){this.we.unobserve(n)}};t.en=class{constructor(n){this.ge=(t,e)=>n(t,e),this.ye=new MutationObserver(this.ge)}observe(n,t){this.ye.observe(n,t)}disconnect(n){this.ye.disconnect(),n&&n()}},t.C={attributes:!0,subtree:!0,attributeFilter:["class"],attributeOldValue:!0}},796:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.G=void 0;t.G=class{constructor(n){this.ge=n}start(n,t,e=!1){n.addEventListener(t,this.ge,e)}remove(n,t,e=!1){n.removeEventListener(t,this.ge,e)}}},818:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,s){function u(n){try{r(o.next(n))}catch(n){s(n)}}function c(n){try{r(o.throw(n))}catch(n){s(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.hn=function(){return o(this,void 0,void 0,(function*(){const n=s.$.tt?s.$.tt:yield(0,i.L)("#dockLeft");s.$.it||(yield(0,i.L)(".layout__dockl"));const t=s.$.et;for(let e of[n,t]){let t=(0,u.ie)(e===n?"L":"R"),o=(0,u.ue)(e===n?"L":"R");t&&o?null==e||e.classList.add("dock-layout-expanded"):null==e||e.classList.remove("dock-layout-expanded")}}))},t.j=function(){return o(this,void 0,void 0,(function*(){var n,t,e;if(s.p.h)return;const o=yield(0,u.oe)(),i=!(0,u.ie)("B")&&(0,u.ue)("B");null===(n=s.$.toolbar)||void 0===n||n.nextElementSibling.classList.toggle("has-dockb",o),null===(t=s.$.toolbar)||void 0===t||t.nextElementSibling.classList.toggle("has-layout-dockb-float",i),null===(e=s.$.ot)||void 0===e||e.classList.toggle("has-layout-dockb-float",i)}))},t.V=function(){var n,t;null===(n=s.$.toolbar)||void 0===n||n.nextElementSibling.classList.remove("has-dockb"),null===(t=s.$.toolbar)||void 0===t||t.nextElementSibling.classList.remove("has-layout-dockb-float")},t.R=function(){var n;null===(n=document.querySelector(".dock-layout-expanded"))||void 0===n||n.classList.remove("dock-layout-expanded")};const i=e(629),s=e(49),u=e(937)},832:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,s){function u(n){try{r(o.next(n))}catch(n){s(n)}}function c(n){try{r(o.throw(n))}catch(n){s(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.i=function(){return o(this,void 0,void 0,(function*(){if(s||u)for(let n=0;n<document.styleSheets.length;n++){let t=document.styleSheets[n];try{for(let n=0;n<t.cssRules.length;n++){let e=t.cssRules[n];e.selectorText&&e.selectorText.includes("::-webkit-scrollbar")&&(e.style.width||e.style.height||e.style.backgroundColor)&&(c.push({styleSheet:t,ke:e.cssText}),t.deleteRule(n),n--)}}catch(n){}}}))},t.q=function(){return o(this,void 0,void 0,(function*(){if(c)for(let n=0;n<c.length;n++){let t=c[n];t.styleSheet.insertRule(t.ke,t.styleSheet.cssRules.length)}}))};const i=e(49),{ht:s,h:u}=i.p,c=[]},844:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,s){function u(n){try{r(o.next(n))}catch(n){s(n)}}function c(n){try{r(o.throw(n))}catch(n){s(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.sn=void 0,t.xe=c,t.N=function(){document.querySelectorAll(".file-tree .has-focus").forEach((n=>n.classList.remove("has-focus")))};const i=e(629),s=e(49),{h:u}=s.p;function c(){return o(this,void 0,void 0,(function*(){if(u)return;s.$.it||(yield(0,i.L)(".layout__dockl"));let n=document.querySelectorAll(".file-tree .b3-list-item--focus");n.length&&(document.querySelectorAll(".file-tree .has-focus").forEach((n=>n.classList.remove("has-focus"))),n.forEach((n=>{n.nextElementSibling&&"UL"===n.nextElementSibling.tagName&&!n.nextElementSibling.classList.contains("fn__none")||n.parentNode instanceof Element&&n.parentNode.classList.add("has-focus")})))}))}t.sn=(0,i.wn)(c)},848:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,s){function u(n){try{r(o.next(n))}catch(n){s(n)}}function c(n){try{r(o.throw(n))}catch(n){s(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.P=t.A=void 0,t.Ft=function(){if(!(d.Un&&d.En&&d.Hn&&d.Dn))return;u.p.yt||u.p.h||u.p.gt?d.Un.classList.add("fn__none"):d.Un.addEventListener("mouseup",_);d.En.addEventListener("click",b),d.Dn.addEventListener("input",v),d.Dn.addEventListener("change",h),d.Hn.addEventListener("input",p)},t.pe=_,t.he=b,t.ve=v,t.be=h,t._e=p;const i=e(796),s=e(629),u=e(49),c=e(288),r=e(406),a=e(202),l=e(929),d=e(8),m=e(217),f=(0,s.wn)(a.Lt,200);function _(){(0,c.fn)(600,(()=>{document.querySelectorAll(".asri-config.b3-menu__item--selected").forEach((n=>n.classList.remove("b3-menu__item--selected"))),a.St[d.Kn].followSysAccentColor?((0,d.In)(!1),d.En.classList.add("b3-menu__item--selected"),r.Ct.setProperty("--asri-user-custom-accent",a.St[d.Kn].userCustomColor||d.qn||"#3478f6"),(0,m.It)(a.St[d.Kn].chroma),(0,m.Pt)(a.St[d.Kn].userCustomColor||d.qn||"#3478f6"),a.St[d.Kn].followSysAccentColor=!1):((0,d.In)(!0),d.Un.classList.add("b3-menu__item--selected"),r.Ct.removeProperty("--asri-user-custom-accent"),a.St[d.Kn].followSysAccentColor=!0,(0,m.nn)()),(0,a.Lt)()}))}function b(n){(0,c.fn)(600,(()=>{d.followSysAccentColor&&((0,d.In)(!1),d.Un.classList.remove("b3-menu__item--selected"),d.En.classList.add("b3-menu__item--selected"),r.Ct.setProperty("--asri-user-custom-accent",a.St[d.Kn].userCustomColor),(0,m.It)(a.St[d.Kn].chroma),(0,m.Pt)(a.St[d.Kn].userCustomColor),a.St[d.Kn].userCustomColor=a.St[d.Kn].userCustomColor,a.St[d.Kn].followSysAccentColor=!1,(0,a.Lt)())}))}function v(){const n=d.Dn.value;r.Ct.setProperty("--asri-user-custom-accent",n),(0,m.Pt)(n)}function h(){d.Un.classList.remove("b3-menu__item--selected"),d.En.classList.add("b3-menu__item--selected"),(0,m.Pt)(d.Dn.value),a.St[d.Kn].userCustomColor=d.Dn.value,(0,d.In)(!1),a.St[d.Kn].followSysAccentColor=!1,(0,a.Lt)()}function p(){const n=this.value;r.Ct.setProperty("--asri-c-factor",n),this.parentElement.ariaLabel=d.i18n.asriChroma+n,a.St[d.Kn].chroma=n,(0,d.$n)("0"===n),(0,m.It)(n),f()}t.A=new i.G((function(n){const t=n.target.closest('[id^="tfp-"]');if(!t)return;const e=document.querySelectorAll('[id^="tfp-"]');"tfp-disable"===t.id?(document.body.classList.remove("asri-tfp-acrylic","asri-tfp-progressive","asri-tfp","asri-tfp-luminous"),e.forEach((n=>{n.classList.remove("b3-menu__item--selected")})),a.St.features.tfp=""):(t.classList.contains("b3-menu__item--selected")?(document.body.classList.remove("asri-tfp",t.id.replace("tfp-","asri-tfp-")),a.St.features.tfp=""):(e.forEach((n=>{n.classList.remove("b3-menu__item--selected")})),document.body.classList.remove("asri-tfp-acrylic","asri-tfp-progressive","asri-tfp-luminous"),document.body.classList.add("asri-tfp",t.id.replace("tfp-","asri-tfp-")),a.St.features.tfp=t.id.replace("tfp-","")),t.classList.toggle("b3-menu__item--selected"));(0,a.Lt)()})),t.P=new i.G((function(n){return o(this,void 0,void 0,(function*(){const t=n.target.closest('[id^="prst-palette-"]');if(!t)return;const e=document.getElementById("asriChroma"),o=t.id,i=l.At[o][d.Kn];document.querySelectorAll('[id^="prst-palette-"]').forEach((n=>n.classList.remove("b3-menu__item--selected"))),(0,c.fn)(600,(()=>{if(a.St[d.Kn].presetPalette===o){t.classList.remove("b3-menu__item--selected"),document.documentElement.removeAttribute("data-asri-palette"),null===d.En||void 0===d.En||d.En.classList.remove("b3-menu__item--disabled"),null===d.Un||void 0===d.Un||d.Un.classList.remove("b3-menu__item--disabled"),null==e||e.classList.remove("b3-menu__item--disabled"),a.St[d.Kn].presetPalette="";const n=a.St[d.Kn].followSysAccentColor;(0,d.In)(n),n?(d.Un.classList.add("b3-menu__item--selected"),r.Ct.removeProperty("--asri-user-custom-accent"),a.St[d.Kn].followSysAccentColor=!0,(0,m.nn)()):(d.En.classList.add("b3-menu__item--selected"),r.Ct.setProperty("--asri-user-custom-accent",a.St[d.Kn].userCustomColor||d.qn||"#3478f6"),a.St[d.Kn].followSysAccentColor=!1),r.Ct.setProperty("--asri-c-factor",a.St[d.Kn].chroma),(0,d.$n)("0"===a.St[d.Kn].chroma),(0,m.It)(a.St[d.Kn].chroma),(0,m.Pt)(d.followSysAccentColor?d.qn:a.St[d.Kn].userCustomColor),(0,a.Lt)()}else t.classList.add("b3-menu__item--selected"),document.documentElement.setAttribute("data-asri-palette",o.split("-")[2]),null===d.En||void 0===d.En||d.En.classList.add("b3-menu__item--disabled"),null===d.Un||void 0===d.Un||d.Un.classList.add("b3-menu__item--disabled"),null==e||e.classList.add("b3-menu__item--disabled"),(0,d.In)(!1),d.Un.classList.remove("b3-menu__item--selected"),d.En.classList.remove("b3-menu__item--selected"),r.Ct.setProperty("--asri-user-custom-accent",i.primary),r.Ct.setProperty("--asri-c-factor",i.chroma),(0,d.$n)("0"===i.chroma),(0,m.It)(i.chroma),(0,m.Pt)(i.primary),a.St[d.Kn].presetPalette=o,(0,a.Lt)()}))}))}))},863:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,s){function u(n){try{r(o.next(n))}catch(n){s(n)}}function c(n){try{r(o.throw(n))}catch(n){s(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.m=function(n){return o(this,void 0,void 0,(function*(){let t=yield(0,i.fe)(n);const e=s.$.status||(yield(0,i.L)("#status"));e&&e.classList.toggle("asri--non-protyle-status",!t)}))},t.D=function(){const n=s.$.status;if(!n)return;n.classList.remove("asri--non-protyle-status")};const i=e(629),s=e(49)},929:(n,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.At=void 0,t.At={"prst-palette-auriflow":{dark:{primary:"#D2B983",chroma:"0.3",followSysAccentColor:!1},light:{primary:"#F4D18B",chroma:"0",followSysAccentColor:!1}},"prst-palette-everbliss":{dark:{primary:"#13012a",chroma:"1.5",followSysAccentColor:!1},light:{primary:"#F4CA57",chroma:"2.8",followSysAccentColor:!1}},"prst-palette-aerisland":{dark:{primary:"#111a3f",chroma:"2",followSysAccentColor:!1},light:{primary:"#e6f9db",chroma:"2",followSysAccentColor:!1}},"prst-palette-zerith":{dark:{primary:"#ABC3D9",chroma:"2.4",followSysAccentColor:!1},light:{primary:"#C2E2DF",chroma:"0.7",followSysAccentColor:!1}},"prst-palette-polar":{dark:{primary:"#E6E9EF",chroma:"0",followSysAccentColor:!1},light:{primary:"#1B1C1D",chroma:"0",followSysAccentColor:!1}},"prst-palette-stellula":{dark:{primary:"#3B2731",chroma:"0.6",followSysAccentColor:!1},light:{primary:"#FFF4EB",chroma:"2.5",followSysAccentColor:!1}}}},937:function(n,t,e){var o=this&&this.__awaiter||function(n,t,e,o){return new(e||(e=Promise))((function(i,s){function u(n){try{r(o.next(n))}catch(n){s(n)}}function c(n){try{r(o.throw(n))}catch(n){s(n)}}function r(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(u,c)}r((o=o.apply(n,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Xn=t.Me=t.rn=void 0,t.kn=c,t.ie=function(n){const t="B"===n?u.$.ut:"L"===n?u.$.it:u.$.st;return!(!t||t.classList.contains("layout--float"))},t.ue=function(n){const t="B"===n?u.$.ut:"L"===n?u.$.it:u.$.st;let e;if(!t)return!1;e="B"===n?t.style.height:t.style.width;return!(!e||"0px"===e)},t.se=function(n="L"){const t="B"===n?u.$.ot:"L"===n?u.$.tt:u.$.et;return!(!t||!t.classList.contains("fn__none"))},t.oe=function(){return o(this,void 0,void 0,(function*(){return u.$.ot||(yield(0,s.L)(".layout__dockb")),!(!u.$.ot||u.$.ot.classList.contains("fn__none"))}))},t.isFullScreen=function(){return!(!i.remote||!i.remote.getCurrentWindow().isFullScreen())},t.te=function(){return!(!u.$.status||!u.$.status.classList.contains("fn__none"))},t.k=function(){return o(this,void 0,void 0,(function*(){return yield(0,s.me)('.layout__center [data-type="wnd"]').then((n=>{t.Xn=n})),t.Xn}))};const i=e(571),s=e(629),u=e(49);function c(){var n,e;u.$.toolbar&&(t.rn=(null===(n=u.$.toolbar)||void 0===n?void 0:n.scrollWidth)>u.$.toolbar.clientWidth,(null===(e=u.$.vt)||void 0===e?void 0:e.classList.contains("fn__none"))||(t.rn=!0))}t.rn=!1,t.Me=(0,s.wn)(c),t.Xn=document.querySelectorAll('.layout__center [data-type="wnd"]')}},t={};function e(o){var i=t[o];if(void 0!==i)return i.exports;var s=t[o]={exports:{}};return n[o].call(s.exports,s,s.exports,e),s.exports}(()=>{const n=e(2);(0,n.t)(),window.destroyTheme=()=>{let t=!0;setTimeout((()=>{const e=window.siyuan.config.appearance.themeLight,o=window.siyuan.config.appearance.themeDark;"Asri"===e&&"Asri"===o&&(t=!1),(0,n.B)(t)}),0)}})()})();